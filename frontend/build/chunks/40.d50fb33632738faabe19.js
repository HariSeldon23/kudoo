(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(652),a=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",a=e||t;Object(r.b)(a,{type:n,closeButton:!1,hideProgressBar:!0})}},2188:function(e,t,n){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},sectionHeader:{padding:[[20,20]]}}}},2334:function(e,t,n){"use strict";n.r(t),function(e){var r,a=n(0),i=n.n(a),o=n(4),s=n.n(o),c=n(28),u=n(15),l=n(39),p=n(13),d=n(34),f=n(2),m=n(5),h=n(30),b=n.n(h),y=n(3),v=n.n(y),E=n(27),g=n(10),S=n(11),T=n(2188),w=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),x=function(t,n,r,a){return new(r||(r=e))((function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}))},O=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,n){return x(t,void 0,void 0,(function(){var t,r,a,i;return O(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),t=this.props.initialData,r=this.state.isEditMode,a={name:e.name,depreciationType:e.depreciationType,usefulLife:Number(e.usefulLife)},r?[3,2]:[4,this.props.createAssetGroup({data:a})];case 1:return(i=o.sent()).success?(Object(S.a)(null,"Asset Group created successfully"),n.setSubmitting(!1),this.props.history.push(m.a.ASSET_GROUPS())):(i.error.map((function(e){return Object(S.a)(e)})),n.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateAssetGroup({data:a,where:{id:t.id}})];case 3:(i=o.sent()).success?(Object(S.a)(null,"Asset Group updated successfully"),n.setSubmitting(!1),this.props.history.push(m.a.ASSET_GROUPS())):(i.error.map((function(e){return Object(S.a)(e)})),n.setSubmitting(!1)),o.label=4;case 4:return[3,6];case 5:return o.sent(),n.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return w(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Asset Group"),this.setState({isEditMode:Boolean(v()(this.props,"initialData"))})},t.prototype.componentDidUpdate=function(e){b()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(v()(this.props,"initialData"))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return i.a.createElement(f.SectionHeader,{title:(e?"Update":"Create new")+" Asset Group",classes:{component:t.sectionHeader}})},t.prototype._renderFormFields=function(e){var t=e.values,n=e.errors,r=e.touched,a=e.handleChange,o=e.handleBlur,c=e.setFieldValue,u=e.setFieldTouched,l=this.props.classes;return i.a.createElement(f.ErrorBoundary,null,i.a.createElement("div",{className:l.component},i.a.createElement(s.a,{container:!0,spacing:16},i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(f.TextField,{label:"Name",placeholder:"Enter name",name:"name",id:"name",value:t.name,onChange:a,onBlur:o,error:r.name&&n.name,showClearIcon:!1})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(f.Dropdown,{label:"Depreciation Type",placeholder:"Select Depreciation Type",name:"depreciationType",id:"depreciationType",items:[{label:"Straight Line",value:"STRAIGHT_LINE"},{label:"Reducing Balance",value:"REDUCING_BALANCE"}],value:t.depreciationType,onChange:function(e){return c("depreciationType",e.value)},onClose:function(){return u("depreciationType")},error:r.depreciationType&&n.depreciationType})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(f.TextField,{label:"Useful Life (in months)",placeholder:"Enter Useful Life",name:"usefulLife",id:"usefulLife",value:String(t.usefulLife),onChange:a,onBlur:o,error:r.usefulLife&&n.usefulLife,showClearIcon:!1,isNumber:!0})))))},t.prototype._renderForm=function(){var e=this,t=this.props,n=t.initialData,r=void 0===n?{}:n,a=t.classes,o=t.theme,c=this.state.isEditMode;return i.a.createElement(l.Formik,{initialValues:{name:r.name||"",depreciationType:r.depreciationType||"",usefulLife:r.usefulLife||""},enableReinitialize:!0,validationSchema:p.object().shape({name:p.string().required("Name is required"),depreciationType:p.string().required("Depreciation Type required"),usefulLife:p.number().required("Useful Life required")}),onSubmit:this._submitForm},(function(t){var n=t.values,r=t.errors,u=t.touched,l=t.handleChange,p=t.handleBlur,d=t.handleSubmit,h=t.isSubmitting,b=t.setFieldValue,y=t.setFieldTouched,v=t.dirty;return i.a.createElement("form",{className:a.form,onSubmit:d},i.a.createElement(s.a,{container:!0,classes:{container:a.formFields}},i.a.createElement(s.a,{item:!0,xs:12,sm:6},e._renderFormFields({values:n,errors:r,touched:u,handleChange:l,handleBlur:p,setFieldValue:b,setFieldTouched:y}))),i.a.createElement(s.a,{container:!0,spacing:0},i.a.createElement(s.a,{item:!0,xs:12,sm:v?6:12},i.a.createElement(f.Button,{title:c?"Back to Asset Groups":"Cancel",onClick:function(){e.props.history.replace(m.a.ASSET_GROUPS())},buttonColor:o.palette.grey[200],classes:{text:a.cancelButtonText}})),v&&i.a.createElement(s.a,{item:!0,xs:12,sm:6},i.a.createElement(f.Button,{loading:h,title:(c?"Update":"Create ")+" Asset Group",buttonColor:o.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return i.a.createElement(f.ErrorBoundary,null,i.a.createElement(E.a,{onChange:function(){e.props.history.push(m.a.ASSET_GROUPS())}},i.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(a.Component);t.default=Object(d.compose)(Object(c.withI18n)(),Object(g.withCreateAssetGroup)(),Object(g.withUpdateAssetGroup)(),Object(g.withAssetGroup)((function(e){return{id:v()(e,"match.params.id")}}),(function(e){var t=e.data;return{initialData:v()(t,"assetGroup")||{}}})),Object(u.b)((function(e){return{profile:e.profile}})),Object(f.withStyles)(T.a))(C)}.call(this,n(21))},27:function(e,t,n){"use strict";var r=n(0),a=n(18),i=n(15),o=n(317),s=n(9),c=n.n(s);t.a=Object(a.compose)(Object(i.b)((function(e){return{selectedCompany:c()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,a=e.children;return Object(o.a)((function(){n(t)}),[t]),r.createElement(r.Fragment,null,a)}))},317:function(e,t,n){"use strict";var r=n(30),a=n.n(r),i=n(0);function o(e){var t,n,r=Object(i.useRef)();return t=e,n=r.current,a()(t,n)||(r.current=e),r.current}t.a=function(e,t){Object(i.useEffect)(e,o(t))}}}]);