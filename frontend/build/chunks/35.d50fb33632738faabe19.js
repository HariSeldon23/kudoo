(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{11:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(652),a=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var r=e?"error":"success",a=e||t;Object(n.b)(a,{type:r,closeButton:!1,hideProgressBar:!0})}},2137:function(e,t,r){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},primaryContactCheck:{marginTop:10},sectionHeader:{padding:[[20,20]]},component:{}}}},2138:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=[{value:"COD",label:"COD"},{value:"DAYS_14",label:"14 Days"},{value:"DAYS_30",label:"30 Days"},{value:"DAYS_60",label:"60 Days"}]},2305:function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),i=r.n(a),o=r(4),s=r.n(o),c=r(28),u=r(15),l=r(39),d=r(13),p=r(34),m=r(2),f=r(5),h=r(9),y=r.n(h),b=r(30),g=r.n(b),S=r(27),v=r(10),E=r(11),O=r(2137),w=r(2138),C=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),x=function(){return(x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},F=function(t,r,n,a){return new(n||(n=e))((function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,s)}c((a=a.apply(t,r||[])).next())}))},j=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,r){return F(t,void 0,void 0,(function(){var t,n,a,i,o;return j(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),t=this.props.initialData,n=this.state.isEditMode,a={street:y()(e,(function(e){return e.street})),city:y()(e,(function(e){return e.city})),state:y()(e,(function(e){return e.state})),country:y()(e,(function(e){return e.country})),postCode:y()(e,(function(e){return e.postcode}))},i={name:e.name,termsOfPayment:e.termsOfPayment,emailAddressForRemittance:e.emailAddressForRemittance},n?[3,2]:[4,this.props.createSupplier({data:x(x({},i),{address:{create:a}})})];case 1:return(o=s.sent()).success?(Object(E.a)(null,"Supplier created successfully"),r.setSubmitting(!1),this.props.history.push(f.a.SUPPLIERS())):(o.error.map((function(e){return Object(E.a)(e)})),r.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateSupplier({data:x(x({},i),{address:{update:{where:{id:t.address[0].id},data:a}}}),where:{id:t.id}})];case 3:(o=s.sent()).success?(Object(E.a)(null,"Supplier updated successfully"),r.setSubmitting(!1),this.props.history.push(f.a.SUPPLIERS())):(o.error.map((function(e){return Object(E.a)(e)})),r.setSubmitting(!1)),s.label=4;case 4:return[3,6];case 5:return s.sent(),r.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return C(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Supplier"),this.setState({isEditMode:Boolean(y()(this.props,(function(e){return e.initialData})))})},t.prototype.componentDidUpdate=function(e){g()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(y()(this.props,(function(e){return e.initialData})))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return i.a.createElement(s.a,{container:!0,item:!0,xs:12,sm:6},i.a.createElement(m.SectionHeader,{title:(e?"Update":"Create new")+" Supplier",subtitle:(e?"Update":"Create a new")+" Supplier "+(e?"to update information in your account. ":"to add to your account. "),classes:{component:t.sectionHeader}}))},t.prototype._renderSupplierForm=function(e){var t=e.values,r=e.errors,n=e.touched,a=e.handleChange,o=e.handleBlur,c=e.setFieldValue,u=e.setFieldTouched,l="name",d="termsOfPayment",p="emailAddressForRemittance",f="Supplier Name",h="Terms Of Payment",y="Email address for remittance",b=this.props.classes;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement("div",{className:b.component},i.a.createElement(s.a,{container:!0,spacing:16},i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:f,placeholder:"E.g: Supplier Name",name:l,id:l,value:t[l],onChange:a,onBlur:o,error:n[l]&&r[l],showClearIcon:!1})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.Dropdown,{label:h,placeholder:"Select Terms Of Payment",name:d,id:d,items:w.a,value:t[d],onChange:function(e){return c(d,e.value)},onClose:function(){return u(d)},error:n[d]&&r[d]})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:y,placeholder:"E.g: Jode@gmail.com",name:p,id:p,value:t[p],onChange:a,onBlur:o,error:n[p]&&r[p],showClearIcon:!1})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.SectionHeader,{title:"Address",classes:{component:b.formHeading}})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.AddressForm,{keys:{street:"street",city:"city",state:"state",country:"country",postcode:"postcode"},values:t,errors:r,touched:n,handleChange:a,handleBlur:o}))))))},t.prototype._renderForm=function(){var e=this,t=this.props,r=t.initialData,n=t.classes,a=t.theme,o=this.state.isEditMode;return i.a.createElement(l.Formik,{initialValues:{name:y()(r,(function(e){return e.name}))||"",termsOfPayment:y()(r,(function(e){return e.termsOfPayment}))||"",emailAddressForRemittance:y()(r,(function(e){return e.emailAddressForRemittance}))||"",street:y()(r,(function(e){return e.address[0].street}))||"",city:y()(r,(function(e){return e.address[0].city}))||"",state:y()(r,(function(e){return e.address[0].state}))||"",country:y()(r,(function(e){return e.address[0].country}))||"",postcode:y()(r,(function(e){return e.address[0].postCode}))||""},enableReinitialize:!0,validationSchema:d.object().shape({name:d.string().required("Name is required"),termsOfPayment:d.string().required("Terms of payment is required"),emailAddressForRemittance:d.string().required("Email address is required"),street:d.string().required("Street is required"),city:d.string().required("City is required"),state:d.string().required("State is required"),country:d.string().required("Country is required"),postcode:d.string().required("Postcode is required")}),onSubmit:this._submitForm},(function(t){var r=t.values,c=t.errors,u=t.touched,l=t.handleChange,d=t.handleBlur,p=t.handleSubmit,h=t.isSubmitting,y=t.setFieldValue,b=t.setFieldTouched,g=t.dirty;return i.a.createElement("form",{className:n.form,onSubmit:p},i.a.createElement(s.a,{container:!0,classes:{container:n.formFields}},i.a.createElement(s.a,{item:!0,xs:12,sm:6},e._renderSupplierForm({values:r,errors:c,touched:u,handleChange:l,handleBlur:d,setFieldValue:y,setFieldTouched:b}))),i.a.createElement(s.a,{container:!0},i.a.createElement(s.a,{item:!0,xs:12,sm:g?6:12},i.a.createElement(m.Button,{title:o?"Back to Supplier list":"Cancel",onClick:function(){e.props.history.replace(f.a.SUPPLIERS())},buttonColor:a.palette.grey[200],classes:{text:n.cancelButtonText}})),g&&i.a.createElement(s.a,{item:!0,xs:12,sm:6},i.a.createElement(m.Button,{loading:h,title:(o?"Update":"Create new")+" Supplier",id:"submit-supplier",buttonColor:a.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement(S.a,{onChange:function(){e.props.history.push(f.a.SUPPLIERS())}},i.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(a.Component);t.default=Object(p.compose)(Object(c.withI18n)(),Object(v.withCreateSupplier)(),Object(v.withUpdateSupplier)(),Object(v.withSupplier)((function(e){return{id:y()(e,(function(e){return e.match.params.id}))}}),(function(e){var t=e.data;return{initialData:y()(t,(function(e){return e.supplier}))||{}}})),Object(u.b)((function(e){return{profile:e.profile}})),Object(m.withStyles)(O.a))(P)}.call(this,r(21))},27:function(e,t,r){"use strict";var n=r(0),a=r(18),i=r(15),o=r(317),s=r(9),c=r.n(s);t.a=Object(a.compose)(Object(i.b)((function(e){return{selectedCompany:c()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,r=e.onChange,a=e.children;return Object(o.a)((function(){r(t)}),[t]),n.createElement(n.Fragment,null,a)}))},317:function(e,t,r){"use strict";var n=r(30),a=r.n(n),i=r(0);function o(e){var t,r,n=Object(i.useRef)();return t=e,r=n.current,a()(t,r)||(n.current=e),n.current}t.a=function(e,t){Object(i.useEffect)(e,o(t))}}}]);