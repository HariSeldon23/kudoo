(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(652),a=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",a=e||t;Object(r.b)(a,{type:n,closeButton:!1,hideProgressBar:!0})}},2173:function(e,t,n){"use strict";(function(e){var r,a=n(0),o=n.n(a),i=n(7),c=n.n(i),l=n(15),s=n(140),u=n.n(s),p=n(3),f=n.n(p),d=n(39),m=n(18),y=n(4),h=n.n(y),b=n(2),v=n(11),E=n(10),g=n(27),S=n(473),w=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},T=function(t,n,r,a){return new(r||(r=e))((function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}l((a=a.apply(t,n||[])).next())}))},_=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onSubmit=function(e,n){return T(t,void 0,void 0,(function(){var t,r,a,o,i,c;return _(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=this.props,r=t.company,a=t.profile,o=f()(r,"data.timeSheetSettings")||{},[4,this.props.updateCompany({where:{id:f()(r,"data.id")},data:{timeSheetSettings:O(O({},o),{groupEvery:e.groupEvery,workingHours:e.workingHours,approvalsEnabled:e.approvalsEnabled})}})];case 1:return i=l.sent(),n.setSubmitting(!1),i.success?(Object(v.a)(null,"Settings Updated"),f()(a,"selectedCompany.id")===i.result.id&&this.props.actions.setUserData({selectedCompany:O(O({},i.result),{owner:!0})})):i.error.map((function(e){return Object(v.a)(e)})),[3,3];case 2:return c=l.sent(),n.setSubmitting(!1),Object(v.a)(c.toString()),[3,3];case 3:return[2]}}))}))},t._renderFormFields=function(e){var n=t.props,r=n.classes,a=n.theme,i=e.values,l=e.setFieldValue,s=e.dirty;return o.a.createElement("form",{className:r.form,onSubmit:e.handleSubmit},o.a.createElement("div",{className:r.formContent},o.a.createElement(b.SectionHeader,{title:"Layout Settings",subtitle:"These settings allow you to customise the view of your timesheets in Kudoo. We have configured these options to our default. ",classes:{component:r.layoutSectionHeader}}),o.a.createElement(h.a,{container:!0},o.a.createElement(h.a,{item:!0,xs:12,sm:6},o.a.createElement(h.a,{container:!0,classes:{container:r.field}},o.a.createElement(h.a,{item:!0,xs:12,sm:9},o.a.createElement(b.Dropdown,{value:i.groupEvery,label:"View for timesheet list",items:[{label:"By Month",value:"MONTHLY"},{label:"By Year",value:"ANNUALLY"}],onChange:function(e){l("groupEvery",e.value)}})),o.a.createElement(h.a,{item:!0,xs:12,sm:3,classes:{item:r.defaultTextWrapper}},o.a.createElement("div",null,"Default"))),o.a.createElement(h.a,{container:!0,classes:{container:c()(r.field,r.approvalField)}},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(b.Checkbox,{label:"Approval Enabled",value:i.approvalsEnabled,onChange:function(e){l("approvalsEnabled",e)}}))),o.a.createElement(b.SectionHeader,{title:"How many hours is a work day",classes:{component:r.workDaySectionHeader}}),o.a.createElement(h.a,{container:!0,classes:{container:r.field}},o.a.createElement(h.a,{item:!0,xs:12,sm:9},o.a.createElement(b.Dropdown,{value:i.workingHours,label:"Work day Hours",items:u()(1,9).map((function(e){return{label:""+e,value:e}})),onChange:function(e){l("workingHours",e.value)}})),o.a.createElement(h.a,{item:!0,xs:12,sm:3,classes:{item:r.defaultTextWrapper}},o.a.createElement("div",null,"Default")))))),s&&o.a.createElement(h.a,{container:!0,spacing:0},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(b.Button,{title:"Update",buttonColor:a.palette.primary.color2,loading:e.isSubmitting,type:"submit"}))))},t}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.classes,n=e.company,r=void 0===n?{}:n,a=f()(r,"data.timeSheetSettings",{})||{};return o.a.createElement("div",{className:t.tabContent},o.a.createElement(g.a,{onChange:r.refetch},o.a.createElement(d.Formik,{onSubmit:this._onSubmit,enableReinitialize:!0,initialValues:{archiveEvery:f()(a,"archiveEvery",""),groupEvery:f()(a,"groupEvery",""),workingHours:f()(a,"workingHours",""),approvalsEnabled:f()(a,"approvalsEnabled",!1)}},this._renderFormFields.bind(this))))},t}(a.Component);t.a=Object(m.compose)(Object(b.withStyles)(S.a),Object(l.b)((function(e){return{profile:e.profile}})),Object(E.withCompany)((function(e){return{id:f()(e,"profile.selectedCompany.id")}})),Object(E.withUpdateCompany)())(x)}).call(this,n(21))},2174:function(e,t,n){"use strict";(function(e){var r,a=n(0),o=n.n(a),i=n(15),c=n(18),l=n(3),s=n.n(l),u=n(4),p=n.n(u),f=n(2),d=n(11),m=n(10),y=n(27),h=n(473),b=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},E=function(t,n,r,a){return new(r||(r=e))((function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}l((a=a.apply(t,n||[])).next())}))},g=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._updateAutoSendInvoice=function(e){return E(t,void 0,void 0,(function(){var t,n,r,a;return g(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this.props.company,n=s()(t,"data.timeSheetSettings",{})||{},[4,this.props.updateCompany({where:{id:s()(t,"data.id")},data:{timeSheetSettings:v(v({},n),{autoSendInvoices:e})}})];case 1:return(r=o.sent()).success?Object(d.a)(null,"Settings Updated"):r.error.map((function(e){return Object(d.a)(e)})),[3,3];case 2:return a=o.sent(),Object(d.a)(a.toString()),[3,3];case 3:return[2]}}))}))},t}return b(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.classes,r=t.company,a=void 0===r?{}:r,i=s()(a,"data.timeSheetSettings.autoSendInvoices",!1);return o.a.createElement("div",{className:n.tabContent},o.a.createElement(y.a,{onChange:a.refetch},o.a.createElement(f.SectionHeader,{title:"Automation settings",subtitle:"These settings allow you to customise the automation of your timesheets in Kudoo. We have configured these options to our default. "}),o.a.createElement("div",null,o.a.createElement(f.SectionHeader,{title:"Send invoice after a timesheet is finalised",classes:{component:n.sendInvoiceSectionHeader}}),o.a.createElement(p.a,{container:!0},o.a.createElement(p.a,{item:!0,xs:12,sm:3},o.a.createElement(f.RadioButton,{label:"Manually send invoices",value:!i,onChange:function(){e._updateAutoSendInvoice(!1)}})),o.a.createElement(p.a,{item:!0,xs:12,sm:3},o.a.createElement(f.RadioButton,{label:"Automatically send invoices",value:i,onChange:function(){e._updateAutoSendInvoice(!0)}}))))))},t}(a.Component);t.a=Object(c.compose)(Object(f.withStyles)(h.b),Object(i.b)((function(e){return{profile:e.profile}})),Object(m.withCompany)((function(e){return{id:s()(e,"profile.selectedCompany.id")}})),Object(m.withUpdateCompany)())(S)}).call(this,n(21))},2324:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),i=n(316),c=n(315),l=n(2),s=n(5),u=n(473),p=n(2173),f=n(2174),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._findActiveSecondaryTab=function(){var e=0;return l.helpers.isURLMatching(s.a.TIMESHEET_SETTINGS_LAYOUT({path:!0}))?e=0:l.helpers.isURLMatching(s.a.TIMESHEET_SETTINGS_AUTOMATION({path:!0}))&&(e=1),e},t}return d(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Timesheet Settings")},t.prototype._renderSecondaryTabs=function(){var e=this;return o.a.createElement(l.Tabs,{tabs:[{label:"Layout",onClick:function(){e.props.history.push(s.a.TIMESHEET_SETTINGS_LAYOUT())}},{label:"Automation",onClick:function(){e.props.history.push(s.a.TIMESHEET_SETTINGS_AUTOMATION())}}],tabTheme:"secondary",activeIndex:this._findActiveSecondaryTab()})},t.prototype.render=function(){var e=this.props,t=e.classes,n=y(e,["classes"]),r=this._findActiveSecondaryTab();return o.a.createElement("div",{className:t.page},this._renderSecondaryTabs(),0===r&&o.a.createElement(p.a,m({},n)),1===r&&o.a.createElement(f.a,m({},n)),0===r&&o.a.createElement(i.a,null,o.a.createElement(c.a,{exact:!0,from:s.a.TIMESHEET_SETTINGS(),to:s.a.TIMESHEET_SETTINGS_LAYOUT()})))},t}(a.Component);t.default=Object(l.withStyles)(u.b)(h)},27:function(e,t,n){"use strict";var r=n(0),a=n(18),o=n(15),i=n(317),c=n(9),l=n.n(c);t.a=Object(a.compose)(Object(o.b)((function(e){return{selectedCompany:l()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,a=e.children;return Object(i.a)((function(){n(t)}),[t]),r.createElement(r.Fragment,null,a)}))},317:function(e,t,n){"use strict";var r=n(30),a=n.n(r),o=n(0);function i(e){var t,n,r=Object(o.useRef)();return t=e,n=r.current,a()(t,n)||(r.current=e),r.current}t.a=function(e,t){Object(o.useEffect)(e,i(t))}},473:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),t.b=function(e){return{page:{display:"flex",flexDirection:"column",flex:1},tabContent:{padding:30},sendInvoiceSectionHeader:{marginTop:25,marginBottom:25}}};var r=function(e){return{tabContent:{flex:1,display:"flex",flexDirection:"column"},form:{flex:1,display:"flex",flexDirection:"column"},formContent:{padding:30,flex:1,display:"flex",flexDirection:"column"},layoutSectionHeader:{marginBottom:25},field:{margin:[[10,0]]},approvalField:{marginTop:30},defaultTextWrapper:{display:"flex",alignItems:"flex-end",paddingBottom:16,paddingLeft:15,fontFamily:e.typography.font.family2,color:"#c4c4c4",fontStyle:"italic"},workDaySectionHeader:{marginTop:55,marginBottom:15}}}}}]);