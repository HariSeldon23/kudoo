(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{11:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(652),r=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var a=e?"error":"success",r=e||t;Object(n.b)(r,{type:a,closeButton:!1,hideProgressBar:!0})}},2070:function(e,t,a){"use strict";t.a=function(e){return{page:{},content:{},sectionHeading:{marginTop:40,padding:"0px 20px 0px"},gstHeading:{padding:"0px"},logoImageWrapper:{padding:"20px 20px 0px"},dropzoneAreaWrapper:{display:"flex",alignItems:"flex-end"},uploadedLogoPreview:{width:360,height:130,borderRadius:5,backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundColor:"#f4f4f4",display:"flex"},logoImage:{},selectNewImageText:{fontFamily:e.typography.font.family2,fontSize:18,fontWeight:500,color:"#fff",flex:1,display:"none",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:5,cursor:"pointer","$uploadedLogoPreview:hover &":{display:"flex"}},dropzoneText:{fontFamily:e.typography.font.family2,fontSize:16,fontWeight:300,color:"#838383"},imageNote:{fontFamily:e.typography.font.family2,fontSize:16,fontWeight:300,marginTop:10,color:"#838383",lineHeight:"26px"},deleteIcon:{color:"red",fontSize:30,margin:[[0,20]]},formWrapper:{},formFields:{padding:"0px 20px 20px"},fieldRow:{marginTop:20,position:"relative"},sameAsAboveCheckbox:{position:"absolute",bottom:6,right:-175},halfFieldWrapper:{display:"flex",alignItems:"center"},abnInput:{marginRight:10},gstLabel:{fontFamily:"'montserrat', sans-serif",fontSize:15,fontWeight:300,margin:"20px 0px",color:"#838383"},cancelButtonText:{color:e.palette.primary.color3},deleteCompanyText:{color:e.palette.secondary.color2,margin:"10px 0px",padding:[[10,20]],fontFamily:e.typography.font.family2,textDecoration:"underline",fontSize:15},deleteCompanyName:{fontWeight:"500",color:e.palette.primary.color3,fontSize:16}}}},2071:function(e,t,a){"use strict";t.a=function(e){return{page:{display:"flex",flexDirection:"column",flex:1},sectionHeadingWrapper:{justifyContent:"space-between",margin:"20px 0px 20px",display:"flex",alignItems:"center"},form:{flex:1},formSection:{marginBottom:20,display:"flex",flexDirection:"column"},formFields:{padding:[0,20]},formsWrapper:{flex:1}}}},2072:function(e,t,a){"use strict";t.a=function(e){return{page:{display:"flex",flexDirection:"column",flex:1},sectionHeadingWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"20px 0px 20px"},form:{display:"flex",flexDirection:"column",flex:1},formSection:{marginBottom:20},formFields:{padding:[0,20]},formsWrapper:{flex:1}}}},644:function(e,t,a){"use strict";(function(e){var n,r=a(0),o=a(15),i=a(18),c=a(7),s=a.n(c),l=a(28),u=a(30),m=a.n(u),p=a(31),d=a.n(p),y=a(3),h=a.n(y),b=a(35),f=a.n(b),g=a(39),C=a(4),v=a.n(C),N=a(251),E=a(13),w=a(2),S=a(5),x=a(76),_=a.n(x),A=a(10),F=a(482),O=a(636),T=a(11),j=a(2070),q=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),I=function(){return(I=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},L=function(t,a,n,r){return new(n||(n=e))((function(e,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(i,c)}s((r=r.apply(t,a||[])).next())}))},D=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},k=function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var o=arguments[t],i=0,c=o.length;i<c;i++,r++)n[r]=o[i];return n},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isGSTRegistered:"yes",selectedLogo:null},t._setTempLocale=function(e){var t=e.initialData,a=e.actions;if(d()(t))a.setTemporaryActiveLanguage(F.a);else{var n=f()(F.b,{value:t.country||"other"})||{};a.setTemporaryActiveLanguage(n.locale)}},t._submitForm=function(e,a){return L(t,void 0,void 0,(function(){var t,n,r,o,i,c,s,l,u,m,p,d,y,h,b,f,g,C;return D(this,(function(v){switch(v.label){case 0:t=this.props,n=t.isCreateNewCompany,r=t.initialData,o=t.profile,i=e.name,c=e.legalNameSameAsName,s=e.legalName,l=e.govNumber,u=e.businessType,m=e.url,p=e.isGSTRegistered,d=e.country,y=e.currency,h=e.hpio,b={businessType:u,legalName:c?i:s,name:i,salesTax:p,websiteURL:m,country:"other"===d?null:d,currency:""===y?"AUD":y,logo:this.state.selectedLogo,HPIO:h},l&&"AU"===d?b=I(I({},b),{govNumber:l.replace("/[^d]/","")}):l&&(b=I(I({},b),{govNumber:l.replace(/ /g,"")})),v.label=1;case 1:return v.trys.push([1,11,,12]),n?[4,this.props.createCompany({data:b})]:[3,6];case 2:return(g=v.sent()).success?(f=I(I({},g.result),{owner:!0}),[4,this.props.actions.setUserData({selectedCompany:f,createdCompanies:k(o.createdCompanies||[],[f])})]):[3,4];case 3:return v.sent(),a.setSubmitting(!1),Object(T.a)(null,"Company created"),this.props.actions.setTemporaryActiveLanguage(void 0),this.props.history.push(S.a.MANAGE_COMPANIES()),[3,5];case 4:g.error.map((function(e){return Object(T.a)(e)})),v.label=5;case 5:return[3,10];case 6:return b={data:b,where:{id:r.id}},[4,this.props.updateCompany(b)];case 7:return(g=v.sent()).success?[4,this.props.refetch()]:[3,9];case 8:return v.sent(),a.setSubmitting(!1),Object(T.a)(null,"Company Updated"),this.props.actions.setTemporaryActiveLanguage(void 0),this.props.history.push(S.a.MANAGE_COMPANIES()),[3,10];case 9:g.error.map((function(e){return Object(T.a)(e)})),v.label=10;case 10:return[3,12];case 11:return C=v.sent(),a.setSubmitting(!1),Object(T.a)(C.toString()),console.log("e===",C),[3,12];case 12:return[2]}}))}))},t._removeLogo=function(){return L(t,void 0,void 0,(function(){var e,t,a;return D(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),e=this.props.initialData,[4,this.props.removeLogo({where:{id:h()(e,"logo.id")}})];case 1:return(t=n.sent()).success?[4,this.props.refetch()]:[3,3];case 2:return n.sent(),Object(T.a)(null,"Logo removed successfully"),[3,4];case 3:t.error.map((function(e){return Object(T.a)(e)})),n.label=4;case 4:return[3,6];case 5:return a=n.sent(),Object(T.a)(a.toString()),[3,6];case 6:return[2]}}))}))},t._deleteCompany=function(){return L(t,void 0,void 0,(function(){var e,t,a,n,r,o;return D(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=this.props,t=e.initialData,a=e.history,n={data:{isArchived:!0},where:{id:t.id}},[4,this.props.updateCompany(n)];case 1:return(r=i.sent()).success?(Object(T.a)(null,"Company archived successfully"),this.props.actions.setUserData({selectedCompany:{}}),a.replace(S.a.MANAGE_COMPANIES())):r.error.map((function(e){return Object(T.a)(e)})),[3,3];case 2:return o=i.sent(),Object(T.a)(o.toString()),[3,3];case 3:return[2]}}))}))},t._showDeleteCompanyModal=function(){return L(t,void 0,void 0,(function(){var e,t,a,n,o,i,c,s=this;return D(this,(function(l){return e=this.props,t=e.theme,a=e.initialData,n=e.classes,"Delete this company account?",o=r.createElement("div",null,r.createElement("div",null,"You are trying to delete the company ",r.createElement("span",{className:n.deleteCompanyName},"'"+a.name+"'")),r.createElement("br",null),r.createElement("div",null,"Please note that this is a permanent action and it can't be reversed."),r.createElement("div",null,"All users linked to this company will be affected."),r.createElement("br",null),r.createElement("div",null,"Are you sure you want to delete company ?")),i=[{title:"Cancel",type:"cancel",onClick:function(){s.props.actions.closeAlertDialog()}},{title:"Delete Company",id:"modal-delete-company",buttonColor:t.palette.secondary.color2,onClick:function(){s._deleteCompany(),s.props.actions.closeAlertDialog()}}],c=t.palette.secondary.color2,this.props.actions.showAlertDialog({title:"Delete this company account?",description:o,buttons:i,titleColor:c}),[2]}))}))},t}return q(t,e),t.prototype.componentDidMount=function(){this._setTempLocale(this.props)},t.prototype.componentDidUpdate=function(e){m()(this.props.initialData,e.initialData)||this._setTempLocale(this.props)},t.prototype._renderCompanyLogoSection=function(){var e=this,t=this.props,a=t.classes,n=t.initialData,o=this.state.selectedLogo,i=h()(n,"logo.url")?h()(n,"logo.url"):void 0,c=h()(o,"preview");return r.createElement(r.Fragment,null,r.createElement(w.SectionHeader,{title:"Company Logo",classes:{component:a.sectionHeading}}),r.createElement("div",{className:a.logoImageWrapper},r.createElement("div",{className:a.dropzoneAreaWrapper},r.createElement("div",null,c||i?r.createElement("div",{className:a.uploadedLogoPreview,style:{backgroundImage:"url("+(c||i)+")"}},r.createElement(N.default,{className:a.selectNewImageText,multiple:!1,accept:"image/*",onDropAccepted:function(t){e.setState({selectedLogo:t[0]})}},"Select new image")):r.createElement(N.default,{style:{width:360,height:130,border:"2px dashed #e5e5e5",borderRadius:5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},multiple:!1,accept:"image/*",onDropAccepted:function(t){e.setState({selectedLogo:t[0]})}},r.createElement("div",{className:a.dropzoneText},"Select or Drop image"))),Boolean(i)&&r.createElement(_.a,{classes:{root:a.deleteIcon},onClick:this._removeLogo},r.createElement("i",{className:"icon icon-trash"}))),r.createElement("div",{className:a.imageNote},"This logo appears on your company invoice.",r.createElement("br",null),"This logo file can't exceed 5mb")))},t.prototype._renderForm=function(e){var t=this.props,a=t.classes,n=t.theme,o=t.isCreateNewCompany,i=t.i18n,c=t.actions,u=e.values,m=e.errors,p=e.touched,d=e.setFieldValue,y=e.handleChange,h=e.handleBlur,b=e.handleSubmit,f=e.isSubmitting,g=e.dirty;return r.createElement(r.Fragment,null,r.createElement(w.SectionHeader,{title:"Basic Details",classes:{component:a.sectionHeading}}),r.createElement("form",{className:a.formWrapper,onSubmit:b},r.createElement(v.a,{container:!0,spacing:0},r.createElement(v.a,{item:!0,xs:12,md:6},r.createElement("div",{className:a.formFields},r.createElement("div",{className:a.fieldRow},r.createElement(w.TextField,{name:"name",id:"name",label:"Company Name",placeholder:"Company Name",value:u.name,showClearIcon:!1,onChange:y,onBlur:h,error:p.name&&m.name})),r.createElement("div",{className:a.fieldRow},r.createElement(w.TextField,{name:"legalName",id:"legalName",label:"Company Legal Name",placeholder:"Company Legal Name",value:u.legalNameSameAsName?u.name:u.legalName,isReadOnly:u.legalNameSameAsName,showClearIcon:!1,onChange:y,onBlur:h,error:p.legalName&&m.legalName}),r.createElement(w.Checkbox,{label:"Same as above",classes:{component:a.sameAsAboveCheckbox},value:u.legalNameSameAsName,onChange:function(e){d("legalNameSameAsName",e)}})),r.createElement("div",{className:a.fieldRow},r.createElement(w.Dropdown,{label:"Country",items:F.b,value:u.country,onChange:function(e){d("country",e.value),c.setTemporaryActiveLanguage(e.locale),d("currency",e.currency)},error:p.country&&m.country})),r.createElement("div",{className:a.fieldRow},r.createElement(w.Dropdown,{label:"Currency",items:O.CURRENCY,value:u.currency,onChange:function(e){d("currency",e.value)},error:p.currency&&m.currency})),r.createElement("div",{className:s()(a.fieldRow,a.halfFieldWrapper)},r.createElement(w.TextField,{name:"govNumber",id:"govNumber",label:i._("ABN"),placeholder:i._("ABN"),showClearIcon:!1,value:(u.govNumber||"").replace(/ /g,""),onChange:y,onBlur:h,classes:{component:a.abnInput},error:p.govNumber&&m.govNumber}),r.createElement(w.Dropdown,{label:"Business Type",id:"business-type",items:[{label:"Health",value:"HEALTH"},{label:"Other",value:"OTHER"}],value:u.businessType,onChange:function(e){d("businessType",e.value)},error:p.businessType&&m.businessType})),"AU"===u.country&&"HEALTH"===u.businessType&&r.createElement("div",{className:a.fieldRow},r.createElement(w.TextField,{name:"hpio",id:"hpio",label:"HPIO",placeholder:"HPIO",value:u.hpio,showClearIcon:!1,onChange:y,onBlur:h,error:p.hpio&&m.hpio})),r.createElement("div",{className:a.fieldRow},r.createElement(w.TextField,{name:"url",id:"url",label:"Website URL",placeholder:"Website URL",showClearIcon:!1,value:u.url,onChange:y,onBlur:h})),r.createElement(w.SectionHeader,{title:i._("GST")+" Settings",classes:{component:s()(a.sectionHeading,a.gstHeading)}}),r.createElement("div",{className:a.gstLabel},"Are you registered for ",r.createElement(l.Trans,{id:"GST"},"GST"),"?"),r.createElement("div",{className:a.halfFieldWrapper},r.createElement(w.RadioButton,{id:"gst-yes",label:"Yes I am registered",value:!0===u.isGSTRegistered,onChange:function(){d("isGSTRegistered",!0)}}),r.createElement(w.RadioButton,{id:"gst-no",label:"No I am not registered",value:!1===u.isGSTRegistered,onChange:function(){d("isGSTRegistered",!1)}}))))),!o&&r.createElement(_.a,{id:"delete-company",classes:{root:a.deleteCompanyText},onClick:this._showDeleteCompanyModal},"Delete this company account"),r.createElement(v.a,{container:!0,spacing:0},r.createElement(v.a,{item:!0,xs:12,md:g?6:12},r.createElement(w.Button,{title:o?"Cancel":"Go Back",href:S.a.MANAGE_COMPANIES(),buttonColor:n.palette.grey[200],classes:{text:a.cancelButtonText},target:"_self"})),g&&r.createElement(v.a,{item:!0,xs:12,md:6},r.createElement(w.Button,{id:"submit-button",title:o?"Save":"Update",buttonColor:n.palette.primary.color2,loading:f,type:"submit"})))))},t.prototype._renderFormSection=function(){var e=this.props,t=e.initialData,a=e.i18n;return r.createElement(g.Formik,{enableReinitialize:!0,initialValues:{name:t.name||"",legalNameSameAsName:t.name===t.legalName,legalName:t.legalName||"",country:d()(t)?"AU":t.country||"other",currency:d()(t.currency)?"AUD":t.currency,govNumber:""+(t.govNumber?t.govNumber:""),businessType:t.businessType||"",url:t.websiteURL||"",isGSTRegistered:t.salesTax||!1,hpio:t.HPIO||""},onSubmit:this._submitForm,validationSchema:E.object().shape({name:E.string().required("Name is required"),country:E.mixed().nullable(),legalName:E.mixed().when("legalNameSameAsName",{is:!1,then:E.string().required("Legal name is required"),otherwise:E.mixed().nullable()}),legalNameSameAsName:E.boolean(),govNumber:E.string().required(a._("ABN")+" is required").test("validate-abn","Not Valid!",(function(e){if(this.parent&&"AU"===this.parent.country){var t=e.replace(/[^\d]/g,"");return 11===t.length&&[10,1,3,5,7,9,11,13,15,17,19].reduce((function(e,a,n){return e+(0===n?a*(Number(t[n])-1):a*Number(t[n]))}),0)%89==0}return!0})),businessType:E.string().required("Please select business type")})},this._renderForm.bind(this))},t.prototype.render=function(){var e=this.props.classes;return r.createElement(w.ErrorBoundary,null,r.createElement("div",{className:e.page},r.createElement("div",{className:e.content},this._renderCompanyLogoSection(),this._renderFormSection())))},t.defaultProps={isCreateNewCompany:!1,initialData:{}},t}(r.Component);t.a=Object(i.compose)(Object(l.withI18n)(),Object(A.withCreateCompany)(),Object(A.withUpdateCompany)(),Object(A.withDeleteAttachment)((function(){return{name:"removeLogo"}})),Object(A.withCompany)((function(e){return{id:h()(e,"match.params.companyId","")}}),(function(e){var t=e.data;return{initialData:h()(t,"company",{}),refetch:t.refetch}})),Object(w.withStyles)(j.a),Object(o.b)((function(e){return{profile:e.profile}})))(P)}).call(this,a(21))},645:function(e,t,a){"use strict";(function(e){var n,r=a(0),o=a.n(r),i=a(9),c=a.n(i),s=a(30),l=a.n(s),u=a(205),m=a.n(u),p=a(18),d=a(15),y=a(4),h=a.n(y),b=a(39),f=a(3),g=a.n(f),C=a(13),v=a(2),N=a(11),E=a(10),w=a(2071),S=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),x=function(t,a,n,r){return new(n||(n=e))((function(e,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(i,c)}s((r=r.apply(t,a||[])).next())}))},_=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t._isSameAsPrimary=function(){var e=t.props.company;if(1===g()(e,"data.addresses",[]).length)return!0;if(2===g()(e,"data.addresses",[]).length){var a=g()(e,"data.addresses[0]",{}),n=g()(e,"data.addresses[1]",{});return l()(a,n)}return!1},t._submitForm=function(e,a){return x(t,void 0,void 0,(function(){var t,n,r,o,i,c,s;return _(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=g()(e,"primary.id"),n={street:g()(e,"primary.street"),city:g()(e,"primary.city"),state:g()(e,"primary.state"),country:g()(e,"primary.country"),postCode:g()(e,"primary.postCode")},r=g()(e,"legal.id"),o={street:g()(e,"legal.street"),city:g()(e,"legal.city"),state:g()(e,"legal.state"),country:g()(e,"legal.country"),postCode:g()(e,"legal.postCode")},i=void 0,e.sameAsPrimary?(t?(i.update=i.update||[],i.update.push({where:{id:t},data:n})):i={create:[n]},r&&(i.delete=i.delete||[],i.delete.push({id:r}))):(t?(i.update=i.update||[],i.update.push({where:{id:t},data:n})):(i.create=i.create||[],i.create.push(n)),r?(i.update=i.update||[],i.update.push({where:{id:r},data:o})):(i.create=i.create||[],i.create.push(o))),[4,this.props.updateCompany({where:{id:g()(this.props,"match.params.companyId")},data:{addresses:i}})];case 1:return c=l.sent(),a.setSubmitting(!1),c.success?(Object(N.a)(null,"Address Updated"),this.props.company.refetch()):c.error.map((function(e){return Object(N.a)(e)})),[3,3];case 2:return s=l.sent(),a.setSubmitting(!1),Object(N.a)(s.toString()),[3,3];case 3:return[2]}}))}))},t}return S(t,e),t.prototype._renderFormFields=function(e){var t=this.props,a=t.classes,n=t.theme,r=e.dirty,i=e.values.sameAsPrimary;return o.a.createElement("form",{className:a.form,onSubmit:e.handleSubmit},o.a.createElement("div",{className:a.formsWrapper},o.a.createElement(h.a,{container:!0,spacing:0,classes:{container:a.formFields}},o.a.createElement(h.a,{item:!0,xs:12,sm:6,classes:{item:a.formSection}},o.a.createElement("div",{className:a.sectionHeadingWrapper},o.a.createElement(v.SectionHeader,{title:"Primary Address",classes:{component:a.sectionHeading}})),o.a.createElement(v.AddressForm,{keys:{street:"primary.street",city:"primary.city",state:"primary.state",country:"primary.country",postcode:"primary.postCode"}}))),o.a.createElement(h.a,{container:!0,spacing:0,classes:{container:a.formFields}},o.a.createElement(h.a,{item:!0,xs:12,sm:6,classes:{item:a.formSection}},o.a.createElement("div",{className:a.sectionHeadingWrapper},o.a.createElement(v.SectionHeader,{title:"Legal Address",classes:{component:a.sectionHeading}}),o.a.createElement(v.Checkbox,{label:"Same as above",value:i,onChange:function(t){e.setFieldValue("sameAsPrimary",t)}})),!i&&o.a.createElement(v.AddressForm,{keys:{street:"legal.street",city:"legal.city",state:"legal.state",country:"legal.country",postcode:"legal.postCode"}})))),r&&o.a.createElement(h.a,{container:!0,spacing:0},o.a.createElement(h.a,{item:!0,xs:12},o.a.createElement(v.Button,{title:"Update",buttonColor:n.palette.primary.color2,type:"submit",loading:e.isSubmitting}))))},t.prototype._renderAddressForm=function(){var e,t=this.props.company,a=this._isSameAsPrimary(),n=g()(t,"data.addresses[0]",{});return a?(e=m()(n)).id="":e=g()(t,"data.addresses[1]",{}),o.a.createElement(b.Formik,{enableReinitialize:!0,initialValues:{primary:{street:g()(n,"street",""),city:g()(n,"city",""),state:g()(n,"state",""),country:g()(n,"country",""),postCode:g()(n,"postCode",""),id:g()(n,"id","")},legal:{street:g()(e,"street",""),city:g()(e,"city",""),state:g()(e,"state",""),country:g()(e,"country",""),postCode:g()(e,"postCode",""),id:g()(e,"id","")},sameAsPrimary:a},validationSchema:C.object({primary:C.object({street:C.string().required("street is required"),city:C.string().required("city is required"),state:C.string().required("state is required"),country:C.string().required("country is required"),postCode:C.string().required("postcode is required")}),sameAsPrimary:C.boolean(),legal:C.mixed().when("sameAsPrimary",(function(e){return e?C.object():C.object({street:C.string().required("street is required"),city:C.string().required("city is required"),state:C.string().required("state is required"),country:C.string().required("country is required"),postCode:C.string().required("postcode is required")})}))}),onSubmit:this._submitForm},this._renderFormFields.bind(this))},t.prototype.render=function(){var e=this.props.classes;return o.a.createElement(v.ErrorBoundary,null,o.a.createElement("div",{className:e.page},this._renderAddressForm()))},t}(r.Component);t.a=Object(p.compose)(Object(v.withStyles)(w.a),Object(d.b)((function(e){return{profile:e.profile}})),Object(E.withCompany)((function(e){return{id:c()(e,(function(e){return e.match.params.companyId}))}})),Object(E.withUpdateCompany)())(A)}).call(this,a(21))},646:function(e,t,a){"use strict";(function(e){var n,r=a(0),o=a.n(r),i=a(15),c=a(18),s=a(4),l=a.n(s),u=a(3),m=a.n(u),p=a(205),d=a.n(p),y=a(39),h=a(13),b=a(9),f=a.n(b),g=a(30),C=a.n(g),v=a(2),N=a(10),E=a(11),w=a(2072),S=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),x=function(t,a,n,r){return new(n||(n=e))((function(e,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(i,c)}s((r=r.apply(t,a||[])).next())}))},_=function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isSameAsCompanyContact=function(){var e=t.props.company;if(1===m()(e,"data.contacts",[]).length)return!0;if(2===m()(e,"data.contacts",[]).length){var a=m()(e,"data.contacts[0]",{}),n=m()(e,"data.contacts[1]",{});return C()(a,n)}return!1},t._submitForm=function(e,a){return x(t,void 0,void 0,(function(){var t,n,r,o,i,c,s;return _(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=m()(e,"companyContact")||{},n={name:m()(t,"contact_name"),surname:m()(t,"contact_surname"),email:m()(t,"email"),mobileCode:m()(t,"mobile.countryCode"),mobileNumber:m()(t,"mobile.number"),landlineCode:m()(t,"landline.countryCode"),landlineNumber:m()(t,"landline.number")},r=m()(e,"supportContact")||{},o={name:m()(r,"contact_name"),surname:m()(r,"contact_surname"),email:m()(r,"email"),mobileCode:m()(r,"mobile.countryCode"),mobileNumber:m()(r,"mobile.number"),landlineCode:m()(r,"landline.countryCode"),landlineNumber:m()(r,"landline.number")},i=void 0,e.sameAsCompanyContact?(t.id?((i=i||{}).update=i.update||[],i.update.push({where:{id:t.id},data:n})):i={create:[n]},r.id&&(i.delete=i.delete||[],i.delete.push({id:r.id}))):(i=i||{},t.id?(i.update=i.update||[],i.update.push({where:{id:t.id},data:n})):(i.create=i.create||[],i.create.push(n)),r.id?(i.update=i.update||[],i.update.push({where:{id:r.id},data:o})):(i.create=i.create||[],i.create.push(o))),[4,this.props.updateCompany({where:{id:m()(this.props,"match.params.companyId")},data:{contacts:i}})];case 1:return c=l.sent(),a.setSubmitting(!1),c.success?(Object(E.a)(null,"Contact Updated"),this.props.company.refetch()):c.error.map((function(e){return Object(E.a)(e)})),[3,3];case 2:return s=l.sent(),a.setSubmitting(!1),Object(E.a)(s.toString()),[3,3];case 3:return[2]}}))}))},t}return S(t,e),t.prototype._renderContactFormFields=function(e){var t=e.values,a=e.handleSubmit,n=e.handleChange,r=e.handleBlur,i=e.touched,c=e.errors,s=e.setFieldValue,u=e.isSubmitting,p=e.dirty;console.log(e);var d=this.props,y=d.classes,h=d.theme;return o.a.createElement("form",{className:y.form,onSubmit:a},o.a.createElement("div",{className:y.formsWrapper},o.a.createElement(l.a,{container:!0,spacing:0,classes:{container:y.formFields}},o.a.createElement(l.a,{item:!0,xs:12,sm:6,classes:{item:y.formSection}},o.a.createElement("div",{className:y.sectionHeadingWrapper},o.a.createElement(v.SectionHeader,{title:"Company Contact Details",classes:{component:y.sectionHeading}})),o.a.createElement(v.TextField,{name:"companyContact.contact_name",id:"companyContact.contact_name",label:"Contact Name",placeholder:"Contact Name",value:t.companyContact.contact_name,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"companyContact.contact_name")&&m()(c,"companyContact.contact_name")}),o.a.createElement(v.TextField,{name:"companyContact.contact_surname",id:"companyContact.contact_surname",label:"Contact Surname",placeholder:"Contact Surname",value:t.companyContact.contact_surname,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"companyContact.contact_surname")&&m()(c,"companyContact.contact_surname")}),o.a.createElement(v.PhoneNumberField,{areaCodeFieldName:"companyContact.mobile.countryCode",phoneNumberFieldName:"companyContact.mobile.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1}),o.a.createElement(v.PhoneNumberField,{areaCodeFieldName:"companyContact.landline.countryCode",phoneNumberFieldName:"companyContact.landline.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1}),o.a.createElement(v.TextField,{name:"companyContact.email",id:"companyContact.email",label:"Email",placeholder:"Email",value:t.companyContact.email,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"companyContact.email")&&m()(c,"companyContact.email")}))),o.a.createElement(l.a,{container:!0,spacing:0,classes:{container:y.formFields}},o.a.createElement(l.a,{item:!0,xs:12,sm:6,classes:{item:y.formSection}},o.a.createElement("div",{className:y.sectionHeadingWrapper},o.a.createElement(v.SectionHeader,{title:"Support Contact Details",classes:{component:y.sectionHeading}}),o.a.createElement(v.Checkbox,{label:"Same as above",value:t.sameAsCompanyContact,onChange:function(e){s("sameAsCompanyContact",e)}})),!t.sameAsCompanyContact&&o.a.createElement("div",null,o.a.createElement(v.TextField,{name:"supportContact.contact_name",id:"supportContact.contact_name",label:"Contact Name",placeholder:"Contact Name",value:t.supportContact.contact_name,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"supportContact.contact_name")&&m()(c,"supportContact.contact_name")}),o.a.createElement(v.TextField,{name:"supportContact.contact_surname",id:"supportContact.contact_surname",label:"Contact Surname",placeholder:"Contact Surname",value:t.supportContact.contact_surname,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"supportContact.contact_surname")&&m()(c,"supportContact.contact_surname")}),o.a.createElement(v.PhoneNumberField,{areaCodeFieldName:"supportContact.mobile.countryCode",phoneNumberFieldName:"supportContact.mobile.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1}),o.a.createElement(v.PhoneNumberField,{areaCodeFieldName:"supportContact.landline.countryCode",phoneNumberFieldName:"supportContact.landline.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1}),o.a.createElement(v.TextField,{name:"supportContact.email",id:"supportContact.email",label:"Email",placeholder:"Email",value:t.supportContact.email,showClearIcon:!1,onChange:n,onBlur:r,error:m()(i,"supportContact.email")&&m()(c,"supportContact.email")}))))),p&&o.a.createElement(l.a,{container:!0,spacing:0},o.a.createElement(l.a,{item:!0,xs:12},o.a.createElement(v.Button,{title:"Update",buttonColor:h.palette.primary.color2,type:"submit",loading:u}))))},t.prototype._renderContactForm=function(){var e,t=this._isSameAsCompanyContact(),a=m()(this.props.company,"data.contacts[0]",{});return t?(e=d()(a)).id="":e=m()(this.props.company,"data.contacts[1]",{}),o.a.createElement(y.Formik,{enableReinitialize:!0,initialValues:{companyContact:{contact_name:m()(a,"name",""),contact_surname:m()(a,"surname",""),mobile:{countryCode:String(m()(a,"mobileCode","")),number:String(m()(a,"mobileNumber",""))},landline:{countryCode:String(m()(a,"landlineCode","")),number:String(m()(a,"landlineNumber",""))},email:m()(a,"email",""),id:m()(a,"id","")},sameAsCompanyContact:t,supportContact:{contact_name:m()(e,"name",""),contact_surname:m()(e,"surname",""),mobile:{countryCode:String(m()(e,"mobileCode","")),number:String(m()(e,"mobileNumber",""))},landline:{countryCode:String(m()(e,"landlineCode","")),number:String(m()(e,"landlineNumber",""))},email:m()(e,"email",""),id:m()(e,"id","")}},validationSchema:h.object({companyContact:h.object({contact_name:h.string().required("Name is required"),contact_surname:h.string().required("Surname is required"),mobile:h.object({countryCode:h.string(),number:h.string().required("Number is required")}),landline:h.object({countryCode:h.string(),number:h.string().required("Number is required")}),email:h.string().required("Email is required").email("Email is not valid")}),sameAsCompanyContact:h.boolean(),supportContact:h.mixed().when("sameAsCompanyContact",(function(e){return e?h.object():h.object({contact_name:h.string().required("Name is required"),contact_surname:h.string().required("Surname is required"),mobile:h.object({countryCode:h.string(),number:h.string().required("Number is required")}),landline:h.object({countryCode:h.string(),number:h.string().required("Number is required")}),email:h.string().required("Email is required").email("Email is not valid")})}))}),onSubmit:this._submitForm},this._renderContactFormFields.bind(this))},t.prototype.render=function(){var e=this.props.classes;return o.a.createElement(v.ErrorBoundary,null,o.a.createElement("div",{className:e.page},this._renderContactForm()))},t}(r.Component);t.a=Object(c.compose)(Object(v.withStyles)(w.a),Object(i.b)((function(e){return{profile:e.profile}})),Object(N.withCompany)((function(e){return{id:f()(e,(function(e){return e.match.params.companyId}))}})),Object(N.withUpdateCompany)())(A)}).call(this,a(21))}}]);