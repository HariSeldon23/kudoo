(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(652),a=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",a=e||t;Object(r.b)(a,{type:n,closeButton:!1,hideProgressBar:!0})}},2182:function(e,t,n){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},primaryContactCheck:{marginTop:10},sectionHeader:{padding:[[20,20]]}}}},2330:function(e,t,n){"use strict";n.r(t),function(e){var r,a=n(0),o=n.n(a),i=n(4),c=n.n(i),s=n(28),l=n(15),u=n(39),d=n(13),p=n(34),m=n(2),h=n(5),f=n(30),b=n.n(f),y=n(3),E=n.n(y),g=n(27),v=n(10),C=n(11),x=n(636),w=n(2182),O=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S=function(t,n,r,a){return new(r||(r=e))((function(e,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function c(e){try{s(a.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}s((a=a.apply(t,n||[])).next())}))},T=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,n){return S(t,void 0,void 0,(function(){var t,r,a,o;return T(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=this.props.initialData,r=this.state.isEditMode,a={total:Number(e.total),currency:e.currency,includeConsTax:e.includeConsTax,posted:e.posted,description:e.description},r?[3,2]:[4,this.props.createLedgerJournal({data:a})];case 1:return(o=i.sent()).success?(Object(C.a)(null,"Journal created successfully"),n.setSubmitting(!1),this.props.history.push(h.a.LEDGER_JOURNALS())):(o.error.map((function(e){return Object(C.a)(e)})),n.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateLedgerJournal({data:a,where:{id:t.id}})];case 3:(o=i.sent()).success?(Object(C.a)(null,"Journal updated successfully"),n.setSubmitting(!1),this.props.history.push(h.a.LEDGER_JOURNALS())):(o.error.map((function(e){return Object(C.a)(e)})),n.setSubmitting(!1)),i.label=4;case 4:return[3,6];case 5:return i.sent(),n.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return O(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Journal"),this.setState({isEditMode:Boolean(E()(this.props,"initialData"))})},t.prototype.componentDidUpdate=function(e){b()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(E()(this.props,"initialData"))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return o.a.createElement(m.SectionHeader,{title:(e?"Update":"Create new")+" Ledger Journal",classes:{component:t.sectionHeader}})},t.prototype._renderFormFields=function(e){var t=e.values,n=e.errors,r=e.touched,a=e.handleChange,i=e.handleBlur,s=e.setFieldValue,l=e.setFieldTouched,u=this.props.classes;return o.a.createElement(m.ErrorBoundary,null,o.a.createElement("div",{className:u.component},o.a.createElement(c.a,{container:!0,spacing:16},o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.TextField,{label:"Description",placeholder:"Enter description here",name:"description",id:"description",value:t.description,onChange:a,onBlur:i,error:r.description&&n.description,showClearIcon:!1,multiline:!0})),o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.TextField,{label:"Total",placeholder:"Enter total value",name:"total",id:"total",value:String(t.total),onChange:a,onBlur:i,error:r.total&&n.total,showClearIcon:!1,isNumber:!0})),o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.Dropdown,{label:"Currency",placeholder:"Select Currency",name:"currency",id:"currency",items:x.CURRENCY,value:t.currency,onChange:function(e){return s("currency",e.value)},onClose:function(){return l("currency")},error:r.currency&&n.currency})),o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement(m.Checkbox,{label:"Include Tax",value:t.includeConsTax,onChange:function(e){s("includeConsTax",e)},error:r.includeConsTax&&n.includeConsTax})),o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement(m.Checkbox,{label:"Posted",value:t.posted,onChange:function(e){s("posted",e)},error:r.posted&&n.posted})))))},t.prototype._renderForm=function(){var e=this,t=this.props,n=t.initialData,r=void 0===n?{}:n,a=t.classes,i=t.theme,s=this.state.isEditMode;return o.a.createElement(u.Formik,{initialValues:{total:r.total||"",description:r.description||"",currency:r.currency||"",includeConsTax:r.includeConsTax||!1,posted:r.posted||!1},enableReinitialize:!0,validationSchema:d.object().shape({total:d.number().required("Enter total value"),description:d.string().required("Description required"),currency:d.string().required("Currency required")}),onSubmit:this._submitForm},(function(t){var n=t.values,r=t.errors,l=t.touched,u=t.handleChange,d=t.handleBlur,p=t.handleSubmit,f=t.isSubmitting,b=t.setFieldValue,y=t.setFieldTouched,E=t.dirty;return o.a.createElement("form",{className:a.form,onSubmit:p},o.a.createElement(c.a,{container:!0,classes:{container:a.formFields}},o.a.createElement(c.a,{item:!0,xs:12,sm:6},e._renderFormFields({values:n,errors:r,touched:l,handleChange:u,handleBlur:d,setFieldValue:b,setFieldTouched:y}))),o.a.createElement(c.a,{container:!0,spacing:0},o.a.createElement(c.a,{item:!0,xs:12,sm:E?6:12},o.a.createElement(m.Button,{title:s?"Back to Journals":"Cancel",onClick:function(){e.props.history.replace(h.a.LEDGER_JOURNALS())},buttonColor:i.palette.grey[200],classes:{text:a.cancelButtonText}})),E&&o.a.createElement(c.a,{item:!0,xs:12,sm:6},o.a.createElement(m.Button,{loading:f,title:(s?"Update":"Create new")+" Journal",id:"submit-mainAccount",buttonColor:i.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return o.a.createElement(m.ErrorBoundary,null,o.a.createElement(g.a,{onChange:function(){e.props.history.push(h.a.LEDGER())}},o.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(a.Component);t.default=Object(p.compose)(Object(s.withI18n)(),Object(v.withCreateLedgerJournal)(),Object(v.withUpdateLedgerJournal)(),Object(v.withLedgerJournal)((function(e){return{id:E()(e,"match.params.id")}}),(function(e){var t=e.data;return{initialData:E()(t,"ledgerJournal")||{}}})),Object(l.b)((function(e){return{profile:e.profile}})),Object(m.withStyles)(w.a))(j)}.call(this,n(21))},27:function(e,t,n){"use strict";var r=n(0),a=n(18),o=n(15),i=n(317),c=n(9),s=n.n(c);t.a=Object(a.compose)(Object(o.b)((function(e){return{selectedCompany:s()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,a=e.children;return Object(i.a)((function(){n(t)}),[t]),r.createElement(r.Fragment,null,a)}))},317:function(e,t,n){"use strict";var r=n(30),a=n.n(r),o=n(0);function i(e){var t,n,r=Object(o.useRef)();return t=e,n=r.current,a()(t,n)||(r.current=e),r.current}t.a=function(e,t){Object(o.useEffect)(e,i(t))}}}]);