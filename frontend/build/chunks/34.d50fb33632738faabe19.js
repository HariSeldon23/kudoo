(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(652),r=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",r=e||t;Object(a.b)(r,{type:n,closeButton:!1,hideProgressBar:!0})}},2178:function(e,t,n){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},primaryContactCheck:{marginTop:10},sectionHeader:{padding:[[20,20]]},component:{}}}},2179:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=[{value:"ASSET",label:"ASSET"},{value:"LIABILITY",label:"LIABILITY"},{value:"EQUITY",label:"EQUITY"},{value:"REVENUE",label:"REVENUE"},{value:"EXPENSE",label:"EXPENSE"}]},2328:function(e,t,n){"use strict";n.r(t),function(e){var a,r=n(0),o=n.n(r),i=n(4),c=n.n(i),u=n(28),s=n(15),l=n(39),p=n(13),d=n(34),m=n(2),f=n(5),h=n(9),b=n.n(h),y=n(30),E=n.n(y),v=n(27),g=n(10),A=n(11),w=n(2178),_=n(2179),C=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),x=function(t,n,a,r){return new(a||(a=e))((function(e,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,c)}u((r=r.apply(t,n||[])).next())}))},S=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,n){return x(t,void 0,void 0,(function(){var t,a,r,o;return S(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=this.props.initialData,a=this.state.isEditMode,r={name:e.mainAccount_name,type:e.mainAccount_type,code:e.mainAccount_code},a?[3,2]:[4,this.props.createMainAccount({data:r})];case 1:return(o=i.sent()).success?(Object(A.a)(null,"Main Account created successfully"),n.setSubmitting(!1),this.props.history.push(f.a.LEDGER())):(o.error.map((function(e){return Object(A.a)(e)})),n.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateMainAccount({data:r,where:{id:t.id}})];case 3:(o=i.sent()).success?(Object(A.a)(null,"Main Account updated successfully"),n.setSubmitting(!1),this.props.history.push(f.a.LEDGER())):(o.error.map((function(e){return Object(A.a)(e)})),n.setSubmitting(!1)),i.label=4;case 4:return[3,6];case 5:return i.sent(),n.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return C(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Main Account"),this.setState({isEditMode:Boolean(b()(this.props,(function(e){return e.initialData})))})},t.prototype.componentDidUpdate=function(e){E()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(b()(this.props,(function(e){return e.initialData})))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return o.a.createElement(m.SectionHeader,{title:(e?"Update":"Create new")+" Main Account",subtitle:(e?"Update":"Create a new")+" main account "+(e?"to update information in your account. ":"to add to your account. "),classes:{component:t.sectionHeader}})},t.prototype._renderMainAccountForm=function(e){var t=e.values,n=e.errors,a=e.touched,r=e.handleChange,i=e.handleBlur,u=e.setFieldValue,s=e.setFieldTouched,l="mainAccount_name",p="mainAccount_type",d="mainAccount_code",f="Main Account Name",h="Main Account Type",b="Main Account Code",y=this.props.classes;return o.a.createElement(m.ErrorBoundary,null,o.a.createElement("div",{className:y.component},o.a.createElement(c.a,{container:!0,spacing:16},o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.TextField,{label:f,placeholder:"E.g: Revenue",name:l,id:l,value:t[l],onChange:r,onBlur:i,error:a[l]&&n[l],showClearIcon:!1})),o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.Dropdown,{label:h,placeholder:"Select Type",name:p,id:p,items:_.a,value:t[p],onChange:function(e){return u(p,e.value)},onClose:function(){return s(p)},error:a[p]&&n[p]})),o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement(m.TextField,{label:b,placeholder:"E.g: 1001",name:d,id:d,value:t[d],onChange:r,onBlur:i,error:a[d]&&n[d],showClearIcon:!1})))))},t.prototype._renderForm=function(){var e=this,t=this.props,n=t.initialData,a=t.classes,r=t.theme,i=this.state.isEditMode;return o.a.createElement(l.Formik,{initialValues:{mainAccount_name:b()(n,(function(e){return e.name}))||"",mainAccount_type:b()(n,(function(e){return e.type}))||"",mainAccount_code:b()(n,(function(e){return e.code}))||""},enableReinitialize:!0,validationSchema:p.object().shape({mainAccount_name:p.string().required("Name is required"),mainAccount_type:p.string().required("Type is required"),mainAccount_code:p.string().required("Code is required")}),onSubmit:this._submitForm},(function(t){var n=t.values,u=t.errors,s=t.touched,l=t.handleChange,p=t.handleBlur,d=t.handleSubmit,h=t.isSubmitting,b=t.setFieldValue,y=t.setFieldTouched,E=t.dirty;return o.a.createElement("form",{className:a.form,onSubmit:d},o.a.createElement(c.a,{container:!0,classes:{container:a.formFields}},o.a.createElement(c.a,{item:!0,xs:12,sm:6},e._renderMainAccountForm({values:n,errors:u,touched:s,handleChange:l,handleBlur:p,setFieldValue:b,setFieldTouched:y}))),o.a.createElement(c.a,{container:!0,spacing:0},o.a.createElement(c.a,{item:!0,xs:12,sm:E?6:12},o.a.createElement(m.Button,{title:i?"Back to Main Account list":"Cancel",onClick:function(){e.props.history.replace(f.a.LEDGER_MAIN_ACCOUNTS())},buttonColor:r.palette.grey[200],classes:{text:a.cancelButtonText}})),E&&o.a.createElement(c.a,{item:!0,xs:12,sm:6},o.a.createElement(m.Button,{loading:h,title:(i?"Update":"Create new")+" Main Account",id:"submit-mainAccount",buttonColor:r.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return o.a.createElement(m.ErrorBoundary,null,o.a.createElement(v.a,{onChange:function(){e.props.history.push(f.a.LEDGER())}},o.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(r.Component);t.default=Object(d.compose)(Object(u.withI18n)(),Object(g.withCreateMainAccount)(),Object(g.withUpdateMainAccount)(),Object(g.withMainAccount)((function(e){return{id:b()(e,(function(e){return e.match.params.id}))}}),(function(e){var t=e.data;return{initialData:b()(t,(function(e){return e.mainAccount}))||{}}})),Object(s.b)((function(e){return{profile:e.profile}})),Object(m.withStyles)(w.a))(M)}.call(this,n(21))},27:function(e,t,n){"use strict";var a=n(0),r=n(18),o=n(15),i=n(317),c=n(9),u=n.n(c);t.a=Object(r.compose)(Object(o.b)((function(e){return{selectedCompany:u()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,r=e.children;return Object(i.a)((function(){n(t)}),[t]),a.createElement(a.Fragment,null,r)}))},317:function(e,t,n){"use strict";var a=n(30),r=n.n(a),o=n(0);function i(e){var t,n,a=Object(o.useRef)();return t=e,n=a.current,r()(t,n)||(a.current=e),a.current}t.a=function(e,t){Object(o.useEffect)(e,i(t))}}}]);