(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{11:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(652),o=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var r=e?"error":"success",o=e||t;Object(n.b)(o,{type:r,closeButton:!1,hideProgressBar:!0})}},2083:function(e,t,r){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},sectionHeader:{padding:"20px 20px 0px"},form:{display:"flex",flexDirection:"column",flex:1},formContainer:{flex:1},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},primaryContactCheck:{marginTop:10}}}},2291:function(e,t,r){"use strict";r.r(t),function(e){var n,o=r(0),a=r.n(o),i=r(4),c=r.n(i),s=r(28),u=r(15),l=r(39),m=r(13),d=r(34),p=r(2),b=r(5),f=r(27),y=r(10),h=r(11),C=r(2083),g=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(t,r,n,o){return new(n||(n=e))((function(e,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,c)}s((o=o.apply(t,r||[])).next())}))},_=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._submitForm=function(e){return v(t,void 0,void 0,(function(){var t,r;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.props.createCustomer({data:{name:e.customer_name,govNumber:String(e.govNumber.replace(/ /g,"")),addresses:{create:[{street:e.street,city:e.city,state:e.state,country:e.country,postCode:e.postcode}]},contacts:{create:[{name:e.contact_name,surname:e.contact_surname,email:e.email,mobileCode:e.mobile.countryCode,mobileNumber:e.mobile.number,landlineCode:e.landline.countryCode,landlineNumber:e.landline.number}]}}})];case 1:return(t=n.sent()).success?(Object(h.a)(null,"Customer created successfully"),this.props.history.push(b.a.CUSTOMERS())):t.error((function(e){return Object(h.a)(e)})),[3,3];case 2:return r=n.sent(),console.error("submit form ===>",r),[3,3];case 3:return[2]}}))}))},t}return g(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Customers")},t.prototype._renderSectionHeading=function(){var e=this.props.classes;return a.a.createElement(p.SectionHeader,{title:"Create a new customer",subtitle:"Create a new customer to add to your account. ",classes:{component:e.sectionHeader}})},t.prototype._renderFormContent=function(e){var t=this.props,r=t.classes,n=t.i18n;e.values;return a.a.createElement("form",{className:r.form,onSubmit:e.handleSubmit},a.a.createElement("div",{style:{padding:"20px",flex:1}},a.a.createElement(c.a,{container:!0,classes:{container:r.formContainer},spacing:16},a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(p.CustomerForm,{keys:{customer_name:"customer_name",contact_name:"contact_name",contact_surname:"contact_surname",abn:"govNumber",email:"email"},labels:{customer_name:"Customer Name",contact_name:"Contact Name",contact_surname:"Contact Surname",abn:n._("ABN"),email:"Email"}})),a.a.createElement(c.a,{item:!0,xs:12,sm:6}),a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(p.SectionHeader,{title:"Address",classes:{component:r.formHeading}}),a.a.createElement(p.AddressForm,{keys:{street:"street",city:"city",state:"state",country:"country",postcode:"postcode"}})),a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(p.SectionHeader,{title:"Customer Contact Details",classes:{component:r.formHeading}}),a.a.createElement(p.PhoneNumberField,{areaCodeFieldName:"mobile.countryCode",phoneNumberFieldName:"mobile.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1}),a.a.createElement(p.PhoneNumberField,{areaCodeFieldName:"landline.countryCode",phoneNumberFieldName:"landline.number",areaCodeLabel:"Area Code",phoneNumberLabel:"Mobile Number",showClearIcon:!1})))),this._renderBottomButtons())},t.prototype._renderForm=function(){return a.a.createElement(l.Formik,{initialValues:{customer_name:"",contact_name:"",contact_surname:"",govNumber:"",email:"",street:"",city:"",state:"",country:"",postcode:"",landline:{countryCode:"",number:""},mobile:{countryCode:"",number:""},primaryContact:!0},validationSchema:m.object().shape({customer_name:m.string().required("Name is required"),contact_name:m.string().required("Contact name is required"),contact_surname:m.string().required("Surname is required"),email:m.string().required("Email is required").required("Invalid Email"),street:m.string().required("street is required"),city:m.string().required("city is required"),state:m.string().required("state is required"),country:m.string().required("country is required"),postcode:m.string().required("postcode is required"),landline:m.object().shape({number:m.string().required("Number is required")}),mobile:m.object().shape({number:m.string().required("Number is required")})}),onSubmit:this._submitForm},this._renderFormContent.bind(this))},t.prototype._renderBottomButtons=function(){var e=this.props,t=e.classes,r=e.theme;return a.a.createElement(c.a,{container:!0,spacing:0},a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(p.Button,{title:"Cancel",href:b.a.CUSTOMERS(),buttonColor:r.palette.grey[200],classes:{text:t.cancelButtonText}})),a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(p.Button,{title:"Save new Customer",id:"submit-customer",buttonColor:r.palette.primary.color2,type:"submit"})))},t.prototype.render=function(){var e=this,t=this.props.classes;return a.a.createElement(p.ErrorBoundary,null,a.a.createElement(f.a,{onChange:function(){e.props.history.push(b.a.CUSTOMERS())}},a.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(o.Component);t.default=Object(d.compose)(Object(p.withStyles)(C.a),Object(s.withI18n)(),Object(u.b)((function(e){return{profile:e.profile}})),Object(y.withCreateCustomer)())(E)}.call(this,r(21))},27:function(e,t,r){"use strict";var n=r(0),o=r(18),a=r(15),i=r(317),c=r(9),s=r.n(c);t.a=Object(o.compose)(Object(a.b)((function(e){return{selectedCompany:s()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,r=e.onChange,o=e.children;return Object(i.a)((function(){r(t)}),[t]),n.createElement(n.Fragment,null,o)}))},317:function(e,t,r){"use strict";var n=r(30),o=r.n(n),a=r(0);function i(e){var t,r,n=Object(a.useRef)();return t=e,r=n.current,o()(t,r)||(n.current=e),n.current}t.a=function(e,t){Object(a.useEffect)(e,i(t))}}}]);