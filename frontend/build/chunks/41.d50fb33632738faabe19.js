(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{11:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(652),r=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");var n=t?"error":"success",r=t||e;Object(a.b)(r,{type:n,closeButton:!1,hideProgressBar:!0})}},2183:function(t,e,n){"use strict";e.a=function(t){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:t.palette.primary.color3},primaryContactCheck:{marginTop:10},sectionHeader:{padding:[[20,20]]},component:{}}}},2331:function(t,e,n){"use strict";n.r(e),function(t){var a,r=n(0),i=n.n(r),o=n(4),c=n.n(o),s=n(28),u=n(15),l=n(39),p=n(13),d=n(34),m=n(2),f=n(5),h=n(9),b=n.n(h),y=n(30),B=n.n(y),g=n(27),v=n(10),T=n(11),E=n(2183),k=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(e,n,a,r){return new(a||(a=t))((function(t,i){function o(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(o,c)}s((r=r.apply(e,n||[])).next())}))},C=function(t,e){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isEditMode:!1},e._submitForm=function(t,n){return w(e,void 0,void 0,(function(){var e,a,r,i;return C(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),e=this.props.initialData,a=this.state.isEditMode,r={transactionDate:t.transactionDate,amount:Number(t.amount),description:t.description},a?[3,2]:[4,this.props.createBankTransaction({data:r})];case 1:return(i=o.sent()).success?(Object(T.a)(null,"Bank Transaction created successfully"),n.setSubmitting(!1),this.props.history.push(f.a.BANKING_BANK_TRANSACTIONS())):(i.error.map((function(t){return Object(T.a)(t)})),n.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateBankTransaction({data:r,where:{id:e.id}})];case 3:(i=o.sent()).success?(Object(T.a)(null,"Bank Transaction updated successfully"),n.setSubmitting(!1),this.props.history.push(f.a.BANKING_BANK_TRANSACTIONS())):(i.error.map((function(t){return Object(T.a)(t)})),n.setSubmitting(!1)),o.label=4;case 4:return[3,6];case 5:return o.sent(),n.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},e}return k(e,t),e.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Bank Transaction"),this.setState({isEditMode:Boolean(b()(this.props,(function(t){return t.initialData})))})},e.prototype.componentDidUpdate=function(t){B()(this.props.initialData,t.initialData)||this.setState({isEditMode:Boolean(b()(this.props,(function(t){return t.initialData})))})},e.prototype._renderSectionHeading=function(){var t=this.state.isEditMode,e=this.props.classes;return i.a.createElement(m.SectionHeader,{title:(t?"Update":"Create new")+" Bank Transaction",subtitle:(t?"Update":"Create a new")+" Bank Transaction "+(t?"to update information in your account. ":"to add to your account. "),classes:{component:e.sectionHeader}})},e.prototype._renderBankTransactionForm=function(t){var e=t.values,n=t.errors,a=t.touched,r=t.handleChange,o=t.handleBlur,s=t.setFieldValue,u="transactionDate",l="amount",p="description",d="Bank Transaction Amount",f="Bank Transaction Description",h=this.props.classes;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement("div",{className:h.component},i.a.createElement(c.a,{container:!0,spacing:16},i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(m.DatePicker,{label:"Transaction Date",onDateChange:function(t){return s(u,t)},value:e[u],classes:{component:h.fromDatePicker}})),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:d,placeholder:"E.g: $10000",name:l,id:l,value:e[l],onChange:r,onBlur:o,error:a[l]&&n[l],showClearIcon:!1})),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:f,placeholder:"Description",name:p,id:p,value:e[p],onChange:r,onBlur:o,error:a[p]&&n[p],showClearIcon:!1})))))},e.prototype._renderForm=function(){var t=this,e=this.props,n=e.initialData,a=e.classes,r=e.theme,o=this.state.isEditMode;return i.a.createElement(l.Formik,{initialValues:{transactionDate:b()(n,(function(t){return t.transactionDate}))||"",amount:b()(n,(function(t){return t.amount}))||0,description:b()(n,(function(t){return t.description}))||""},enableReinitialize:!0,validationSchema:p.object().shape({transactionDate:p.string().required("Transaction Date is required"),amount:p.string().required("Amount is required"),description:p.string().required("Description is required")}),onSubmit:this._submitForm},(function(e){var n=e.values,s=e.errors,u=e.touched,l=e.handleChange,p=e.handleBlur,d=e.handleSubmit,h=e.isSubmitting,b=e.setFieldValue,y=e.dirty;return i.a.createElement("form",{className:a.form,onSubmit:d},i.a.createElement(c.a,{container:!0,classes:{container:a.formFields}},i.a.createElement(c.a,{item:!0,xs:12,sm:6},t._renderBankTransactionForm({values:n,errors:s,touched:u,handleChange:l,handleBlur:p,setFieldValue:b}))),i.a.createElement(c.a,{container:!0,spacing:0},i.a.createElement(c.a,{item:!0,xs:12,sm:y?6:12},i.a.createElement(m.Button,{title:o?"Back to Bank Transaction list":"Cancel",onClick:function(){t.props.history.replace(f.a.BANKING_BANK_TRANSACTIONS())},buttonColor:r.palette.grey[200],classes:{text:a.cancelButtonText}})),y&&i.a.createElement(c.a,{item:!0,xs:12,sm:6},i.a.createElement(m.Button,{loading:h,title:(o?"Update":"Create new")+" Bank Transaction",id:"submit-bankTransaction",buttonColor:r.palette.primary.color2,type:"submit"}))))}))},e.prototype.render=function(){var t=this,e=this.props.classes;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement(g.a,{onChange:function(){t.props.history.push(f.a.BANKING_BANK_TRANSACTIONS())}},i.a.createElement("div",{className:e.page},this._renderSectionHeading(),this._renderForm())))},e}(r.Component);e.default=Object(d.compose)(Object(s.withI18n)(),Object(v.withCreateBankTransaction)(),Object(v.withUpdateBankTransaction)(),Object(v.withBankTransaction)((function(t){return{id:b()(t,(function(t){return t.match.params.id}))}}),(function(t){var e=t.data;return{initialData:b()(e,(function(t){return t.bankTransaction}))||{}}})),Object(u.b)((function(t){return{profile:t.profile}})),Object(m.withStyles)(E.a))(x)}.call(this,n(21))},27:function(t,e,n){"use strict";var a=n(0),r=n(18),i=n(15),o=n(317),c=n(9),s=n.n(c);e.a=Object(r.compose)(Object(i.b)((function(t){return{selectedCompany:s()(t,(function(t){return t.profile.selectedCompany}))}})))((function(t){var e=t.selectedCompany,n=t.onChange,r=t.children;return Object(o.a)((function(){n(e)}),[e]),a.createElement(a.Fragment,null,r)}))},317:function(t,e,n){"use strict";var a=n(30),r=n.n(a),i=n(0);function o(t){var e,n,a=Object(i.useRef)();return e=t,n=a.current,r()(e,n)||(a.current=t),a.current}e.a=function(t,e){Object(i.useEffect)(t,o(e))}}}]);