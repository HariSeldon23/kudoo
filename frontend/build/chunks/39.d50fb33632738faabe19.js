(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{11:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(652),r=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var a=e?"error":"success",r=e||t;Object(n.b)(r,{type:a,closeButton:!1,hideProgressBar:!0})}},2189:function(e,t,a){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},sectionHeader:{padding:[[20,20]]}}}},2335:function(e,t,a){"use strict";a.r(t),function(e){var n,r=a(0),i=a.n(r),o=a(4),s=a.n(o),l=a(28),u=a(15),c=a(39),p=a(13),d=a(34),m=a(2),f=a(5),h=a(30),b=a.n(h),v=a(3),g=a.n(v),y=a(27),E=a(10),S=a(11),w=a(2189),x=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),A=function(t,a,n,r){return new(n||(n=e))((function(e,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,s)}l((r=r.apply(t,a||[])).next())}))},B=function(e,t){var a,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,a){return A(t,void 0,void 0,(function(){var t,n,r,i;return B(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),t=this.props.initialData,n=this.state.isEditMode,r={name:e.name,dateOfAquisition:e.dateOfAquisition?e.dateOfAquisition:void 0,aquisitionPrice:e.aquisitionPrice?Number(e.aquisitionPrice):void 0,netBookValue:e.netBookValue?Number(e.netBookValue):void 0,depreciation:e.depreciation?Number(e.depreciation):void 0,salvageValue:e.salvageValue?Number(e.salvageValue):void 0,assetGroup:{connect:{id:e.assetGroup}}},n?[3,2]:[4,this.props.createAsset({data:r})];case 1:return(i=o.sent()).success?(Object(S.a)(null,"Asset created successfully"),a.setSubmitting(!1),this.props.history.push(f.a.ASSETS())):(i.error.map((function(e){return Object(S.a)(e)})),a.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateAsset({data:r,where:{id:t.id}})];case 3:(i=o.sent()).success?(Object(S.a)(null,"Asset updated successfully"),a.setSubmitting(!1),this.props.history.push(f.a.ASSETS())):(i.error.map((function(e){return Object(S.a)(e)})),a.setSubmitting(!1)),o.label=4;case 4:return[3,6];case 5:return o.sent(),a.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return x(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Asset"),this.setState({isEditMode:Boolean(g()(this.props,"initialData"))})},t.prototype.componentDidUpdate=function(e){b()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(g()(this.props,"initialData"))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return i.a.createElement(m.SectionHeader,{title:(e?"Update":"Create")+" Asset",classes:{component:t.sectionHeader}})},t.prototype._renderFormFields=function(e){var t=e.values,a=e.errors,n=e.touched,r=e.handleChange,o=e.handleBlur,l=e.setFieldValue,u=e.setFieldTouched,c=this.props,p=c.classes,d=c.assetGroups;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement("div",{className:p.component},i.a.createElement(s.a,{container:!0,spacing:16},i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:"Name",placeholder:"Enter name",name:"name",id:"name",value:t.name,onChange:r,onBlur:o,error:n.name&&a.name,showClearIcon:!1})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.Dropdown,{label:"Asset Group",placeholder:"Select Asset Group",name:"assetGroup",id:"assetGroup",items:g()(d,"data",[]).map((function(e){return{label:e.name,value:e.id}})),value:t.assetGroup,onChange:function(e){return l("assetGroup",e.value)},onClose:function(){return u("assetGroup")},error:n.assetGroup&&a.assetGroup})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.DatePicker,{label:"Date Of Aquisition",value:t.dateOfAquisition,onDateChange:function(e){l("dateOfAquisition",e),u("dateOfAquisition")}})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:"Aquisition Price",placeholder:"Enter aquisition price",name:"aquisitionPrice",id:"aquisitionPrice",value:String(t.aquisitionPrice),onChange:r,onBlur:o,error:n.aquisitionPrice&&a.aquisitionPrice,showClearIcon:!1,isNumber:!0})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:"Netbook Value",placeholder:"Enter netbook value",name:"netBookValue",id:"netBookValue",value:String(t.netBookValue),onChange:r,onBlur:o,error:n.netBookValue&&a.netBookValue,showClearIcon:!1,isNumber:!0})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:"Salvage Value",placeholder:"Enter salvage value",name:"salvageValue",id:"salvageValue",value:String(t.salvageValue),onChange:r,onBlur:o,error:n.salvageValue&&a.salvageValue,showClearIcon:!1,isNumber:!0})),i.a.createElement(s.a,{item:!0,xs:12},i.a.createElement(m.TextField,{label:"depreciation",placeholder:"Enter depreciation",name:"depreciation",id:"depreciation",value:String(t.depreciation),onChange:r,onBlur:o,error:n.depreciation&&a.depreciation,showClearIcon:!1,isNumber:!0})))))},t.prototype._renderForm=function(){var e=this,t=this.props,a=t.initialData,n=void 0===a?{}:a,r=t.classes,o=t.theme,l=this.state.isEditMode;return i.a.createElement(c.Formik,{initialValues:{name:n.name||"",dateOfAquisition:n.dateOfAquisition||"",aquisitionPrice:n.aquisitionPrice||"",netBookValue:n.netBookValue||"",depreciation:n.depreciation||"",salvageValue:n.salvageValue||"",assetGroup:g()(n,"assetGroup.id")||""},enableReinitialize:!0,validationSchema:p.object().shape({name:p.string().required("Name is required"),assetGroup:p.string().required("Please select Asset Group")}),onSubmit:this._submitForm},(function(t){var a=t.values,n=t.errors,u=t.touched,c=t.handleChange,p=t.handleBlur,d=t.handleSubmit,h=t.isSubmitting,b=t.setFieldValue,v=t.setFieldTouched,g=t.dirty;return i.a.createElement("form",{className:r.form,onSubmit:d},i.a.createElement(s.a,{container:!0,classes:{container:r.formFields}},i.a.createElement(s.a,{item:!0,xs:12,sm:6},e._renderFormFields({values:a,errors:n,touched:u,handleChange:c,handleBlur:p,setFieldValue:b,setFieldTouched:v}))),i.a.createElement(s.a,{container:!0,spacing:0},i.a.createElement(s.a,{item:!0,xs:12,sm:g?6:12},i.a.createElement(m.Button,{title:l?"Back to Assets":"Cancel",onClick:function(){e.props.history.replace(f.a.ASSETS())},buttonColor:o.palette.grey[200],classes:{text:r.cancelButtonText}})),g&&i.a.createElement(s.a,{item:!0,xs:12,sm:6},i.a.createElement(m.Button,{loading:h,title:(l?"Update":"Create")+" Asset",buttonColor:o.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return i.a.createElement(m.ErrorBoundary,null,i.a.createElement(y.a,{onChange:function(){e.props.history.push(f.a.ASSETS())}},i.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(r.Component);t.default=Object(d.compose)(Object(m.withStyles)(w.a),Object(u.b)((function(e){return{profile:e.profile}})),Object(l.withI18n)(),Object(E.withCreateAsset)(),Object(E.withUpdateAsset)(),Object(E.withAssetGroups)((function(e){return{variables:{where:{isArchived:!1,company:{id:e.profile.selectedCompany.id}},orderBy:"name_ASC"}}})),Object(E.withAsset)((function(e){return{id:g()(e,"match.params.id")}}),(function(e){var t=e.data;return{initialData:g()(t,"asset")||{}}})))(C)}.call(this,a(21))},27:function(e,t,a){"use strict";var n=a(0),r=a(18),i=a(15),o=a(317),s=a(9),l=a.n(s);t.a=Object(r.compose)(Object(i.b)((function(e){return{selectedCompany:l()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,a=e.onChange,r=e.children;return Object(o.a)((function(){a(t)}),[t]),n.createElement(n.Fragment,null,r)}))},317:function(e,t,a){"use strict";var n=a(30),r=a.n(n),i=a(0);function o(e){var t,a,n=Object(i.useRef)();return t=e,a=n.current,r()(t,a)||(n.current=e),n.current}t.a=function(e,t){Object(i.useEffect)(e,o(t))}}}]);