(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(652),o=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",o=e||t;Object(r.b)(o,{type:n,closeButton:!1,hideProgressBar:!0})}},2156:function(e,t,n){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column"},patientNameCell:{fontFamily:e.typography.font.family2,color:e.palette.primary.color2,cursor:"pointer",fontWeight:500,paddingLeft:24,paddingRight:24}}}},2316:function(e,t,n){"use strict";n.r(t),function(e){var r,o=n(0),a=n.n(o),i=n(9),s=n.n(i),c=n(30),l=n.n(c),u=n(101),p=n(34),h=n(2),d=n(5),m=n(27),f=n(11),v=n(10),y=n(465),g=n(2156),b=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(t,n,r,o){return new(r||(r=e))((function(e,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},_=function(e){function t(t){var n=e.call(this,t)||this;return n._onSortRequested=function(e,t,r){return w(n,void 0,void 0,(function(){var n;return C(this,(function(o){switch(o.label){case 0:return n={orderBy:t.id+"_"+r.toUpperCase()},[4,this.props.patients.refetch(n)];case 1:return o.sent(),this.setState({columns:e}),[2]}}))}))},n._onArchivePatient=function(e){return w(n,void 0,void 0,(function(){var t,n;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.props.archivePatient({where:{id:e.id},data:{isArchived:!0}})];case 1:return(t=r.sent()).success?(Object(f.a)(null,"Patient archived successfully"),this.props.patients.refetch()):t.error((function(e){return Object(f.a)(e)})),[3,3];case 2:throw n=r.sent(),Object(f.a)("Something went wrong"),new Error(n);case 3:return[2]}}))}))},n._onUnArchivePatient=function(e){return w(n,void 0,void 0,(function(){var t,n;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.props.unArchivePatient({where:{id:e.id},data:{isArchived:!1}})];case 1:return(t=r.sent()).success?(Object(f.a)(null,"Patient activated successfully"),this.props.patients.refetch()):t.error((function(e){return Object(f.a)(e)})),[3,3];case 2:throw n=r.sent(),Object(f.a)("Something went wrong"),new Error(n);case 3:return[2]}}))}))},n._onRemovePatient=function(e){return w(n,void 0,void 0,(function(){var t,n;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.props.deletePatient({where:{id:e.id}})];case 1:return(t=r.sent()).success?(Object(f.a)(null,"Patient deleted successfully"),this.props.patients.refetch()):t.error((function(e){return Object(f.a)(e)})),[3,3];case 2:throw n=r.sent(),Object(f.a)("Something went wrong"),new Error(n);case 3:return[2]}}))}))},n._searchPatient=function(e){return w(n,void 0,void 0,(function(){return C(this,(function(t){return this.props.patients.refetch({where:{title_contains:e||void 0}}),[2]}))}))},n._getListPageProps=function(){var e=n.props,t=e.history,r=e.theme,o=n._getType(),i=a.a.createElement(a.a.Fragment,null,"You have not created any patients yet.",a.a.createElement("br",null),"Letâ€™s start by creating your first patient.");return"active"===o?{title:"Patients",subtitle:"Below is a list of all your saved patients.",headerButtonProps:{title:"Create Patient",onClick:function(){t.push(d.a.CREATE_PATIENT())},buttonColor:r.palette.primary.color2},noItemsMessage:i}:"archived"===o?{title:"Archived Patients",subtitle:"Below is a list of all archived patients.",headerButtonProps:{title:"Delete list permanently",onClick:function(){t.push(d.a.ACTIVE_PATIENTS())},buttonColor:r.palette.secondary.color2},noItemsMessage:i}:void 0},n.state={displayedPatients:s()(t,(function(e){return e.patients.data})),columns:[]},n}return b(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({columns:[{id:"title",label:"Title",sorted:!0,order:"asc",renderCell:function(t,n){return a.a.createElement(u.a,{to:d.a.PATIENT_DETAILS({id:t.id}),className:e.props.classes.patientNameCell},t[n.id])}},{id:"firstName",label:"FirstName"},{id:"lastName",label:"LastName"}]})},t.prototype.componentDidUpdate=function(e){var t=s()(e,(function(e){return e.patients.data}))||[],n=s()(this.props,(function(e){return e.patients.data}))||[];l()(t,n)||this._updatePatients(n)},t.prototype._getType=function(){var e=this.props.match.path,t="active";return e.indexOf("active")>-1?t="active":e.indexOf("archived")>-1&&(t="archived"),t},t.prototype._updatePatients=function(e){this.setState({displayedPatients:e})},t.prototype.render=function(){var e=this.state,t=e.displayedPatients,n=e.columns,r=this.props,o=r.actions,i=r.patients,s=void 0===i?{}:i,c=this._getListPageProps(),l=this._getType();return a.a.createElement(m.a,{onChange:s.refetch},a.a.createElement(y.a,{variant:l,items:t,header:{title:c.title,subtitle:c.subtitle,buttonProps:c.headerButtonProps,showButton:!0},noItemsMessage:c.noItemsMessage,actions:o,columns:n,onArchiveItem:this._onArchivePatient,onSortRequested:this._onSortRequested,onUnArchiveItem:this._onUnArchivePatient,onRemoveItem:this._onRemovePatient,onSearch:this._searchPatient}))},t}(o.Component);t.default=Object(p.compose)(Object(h.withStyles)(g.a),Object(v.withPatients)((function(e){var t=e.match.path,n=!1;return t.indexOf("active")>-1?n=!1:t.indexOf("archived")>-1&&(n=!0),{name:"patients",variables:{where:{isArchived:n},orderBy:"title_ASC"}}})),Object(v.withDeletePatient)(),Object(v.withUpdatePatient)((function(){return{name:"archivePatient"}})),Object(v.withUpdatePatient)((function(){return{name:"unArchivePatient"}})))(_)}.call(this,n(21))},27:function(e,t,n){"use strict";var r=n(0),o=n(18),a=n(15),i=n(317),s=n(9),c=n.n(s);t.a=Object(o.compose)(Object(a.b)((function(e){return{selectedCompany:c()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,o=e.children;return Object(i.a)((function(){n(t)}),[t]),r.createElement(r.Fragment,null,o)}))},317:function(e,t,n){"use strict";var r=n(30),o=n.n(r),a=n(0);function i(e){var t,n,r=Object(a.useRef)();return t=e,n=r.current,o()(t,n)||(r.current=e),r.current}t.a=function(e,t){Object(a.useEffect)(e,i(t))}},465:function(e,t,n){"use strict";var r,o=n(0),a=n.n(o),i=n(4),s=n.n(i),c=n(31),l=n.n(c),u=n(2),p=n(443),h=n(18),d=n(35),m=n.n(d),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onHeaderButtonClick=function(){var e=t.props,n=e.variant,r=e.header;"archived"===n?t._showDeleteAllItemsDialog():r.buttonProps.onClick()},t._showArchiveDialog=function(e){var n=t.props,r=n.theme,o=n.alertMessages.archiveItem,a=[{title:"Cancel",type:"cancel",onClick:function(){t.props.actions.closeAlertDialog()}},{title:"Archive",onClick:function(){t.props.actions.closeAlertDialog(),t.props.onArchiveItem(e)}}],i=r.palette.primary.color2;t.props.actions.showAlertDialog({title:"Archive ?",description:o,buttons:a,titleColor:i})},t._showDeleteAllItemsDialog=function(){var e=t.props,n=e.theme,r=e.alertMessages,o=e.header,a=r.deleteAllItem,i=[{title:"Cancel",type:"cancel",onClick:function(){t.props.actions.closeAlertDialog()}},{title:"Delete All",buttonColor:n.palette.secondary.color2,onClick:function(){t.props.actions.closeAlertDialog(),o.buttonProps.onClick()}}],s=n.palette.secondary.color2;t.props.actions.showAlertDialog({title:"Permanently delete?",description:a,buttons:i,titleColor:s})},t._showDeleteItemDialog=function(e){var n=t.props,r=n.theme,o=n.alertMessages.deleteItem,a=[{title:"Cancel",type:"cancel",onClick:function(){t.props.actions.closeAlertDialog()}},{title:"Delete",buttonColor:r.palette.secondary.color2,onClick:function(){t.props.actions.closeAlertDialog(),t.props.onRemoveItem(e)}}],i=r.palette.secondary.color2;t.props.actions.showAlertDialog({title:"Permanently delete?",description:o,buttons:a,titleColor:i})},t._showUnarchiveItemDialog=function(e){var n=t.props,r=n.theme,o=n.alertMessages.unarchiveItem,a=[{title:"Cancel",type:"cancel",onClick:function(){t.props.actions.closeAlertDialog()}},{title:"Activate",onClick:function(){t.props.actions.closeAlertDialog(),t.props.onUnArchiveItem(e)}}],i=r.palette.primary.color2;t.props.actions.showAlertDialog({title:"Activate?",description:o,buttons:a,titleColor:i})},t._onRemoveClicked=function(e){var n=t.props.variant;"active"===n?t._showArchiveDialog(e):"archived"===n&&t._showDeleteItemDialog(e)},t._onSortRequested=function(e){var n=g(t.props.columns),r=m()(n,{sorted:!0}),o=m()(n,{id:e.id}),a="asc";r.id===o.id&&"asc"===r.order&&(a="desc"),r.sorted=!1,o.sorted=!0,o.order=a,t.props.onSortRequested(n,o,a)},t}return f(t,e),t.prototype._renderSectionHeading=function(){var e=this,t=this.props.header;return a.a.createElement(u.SectionHeader,{title:t.title,subtitle:t.subtitle,renderLeftPart:function(){return t.showButton?a.a.createElement(u.Button,{title:t.buttonProps.title,applyBorderRadius:!0,width:260,buttonColor:t.buttonProps.buttonColor,onClick:e._onHeaderButtonClick}):null}})},t.prototype._renderNoItems=function(){var e=this.props,t=e.classes,n=e.noItemsMessage;return a.a.createElement("div",{className:t.noItemsWrapper},a.a.createElement("div",{className:t.noItemMessageWrapper},a.a.createElement("div",{className:t.noItemMessage},n)))},t.prototype._renderItems=function(){var e=this.props,t=e.classes,n=e.items,r=e.columns,o=e.onSearch,i=e.variant,c=(e.header,e.noItemsMessage,e.alertMessages,e.onSortRequested,e.onArchiveItem,e.onUnArchiveItem,e.onRemoveItem,e.showSearch),l=e.onBottomReached,p=e.loading,h=y(e,["classes","items","columns","onSearch","variant","header","noItemsMessage","alertMessages","onSortRequested","onArchiveItem","onUnArchiveItem","onRemoveItem","showSearch","onBottomReached","loading"]);return a.a.createElement("div",{className:t.itemsContainer},c&&a.a.createElement(s.a,{item:!0,xs:12,sm:6},a.a.createElement(u.SearchInput,{classes:{component:t.searchInput},placeholder:"Search",items:[],onSearch:o})),a.a.createElement(u.Table,v({columnData:r,data:n,sortable:!0,stripe:!1,onRequestSort:this._onSortRequested,showRemoveIcon:!0,onRemoveClicked:this._onRemoveClicked,showAddIcon:"archived"===i,onAddClicked:this._showUnarchiveItemDialog,onBottomReachedThreshold:500,onBottomReached:l,loading:p},h)))},t.prototype.render=function(){var e=this.props,t=e.classes,n=e.items;return a.a.createElement(u.ErrorBoundary,null,a.a.createElement("div",{className:t.tabContent},this._renderSectionHeading(),l()(n)&&this._renderNoItems(),!l()(n)&&this._renderItems()))},t.defaultProps={header:{title:"",subtitle:"",showButton:!1,buttonProps:{onClick:function(){},title:""}},showSearch:!0,alertMessages:{archiveItem:a.a.createElement("div",null,"Are you sure you want to archive?"),deleteAllItem:a.a.createElement("div",null,a.a.createElement("div",null,"You are trying to permanently delete all archived items from this account. This action is not reversable."),a.a.createElement("br",null),a.a.createElement("div",null,"Are you sure you want to delete all archived items?")),deleteItem:a.a.createElement("div",null,a.a.createElement("div",null,"You are trying to permanently delete an item from this account. This action is not reversable."),a.a.createElement("br",null),a.a.createElement("div",null,"Are you sure you want to delete this item?")),unarchiveItem:a.a.createElement("div",null,a.a.createElement("div",null,"You are trying to activate a item from the archived list. This will add the item to your items list."),a.a.createElement("br",null),a.a.createElement("div",null,"Are you sure you want to activate this item?"))},onBottomReached:function(){}},t}(o.Component);t.a=Object(h.compose)(p.a,Object(u.withStyles)((function(e){return{page:{flex:1,display:"flex",flexDirection:"column"},tabContent:{padding:"40px 20px",flex:1,display:"flex",flexDirection:"column"},noItemsWrapper:{flex:1,alignItems:"center",justifyContent:"center",display:"flex",margin:"50px 0px"},noItemMessageWrapper:{width:"60%",maxWidth:660,margin:"0px auto",border:"4px dashed "+e.palette.grey[300],padding:10,borderRadius:20,minHeight:200,backgroundColor:e.palette.grey[100],alignItems:"center",justifyContent:"center",display:"flex"},noItemMessage:{fontFamily:e.typography.font.family1,fontSize:26,lineHeight:"35px",fontWeight:"500",color:e.palette.blueGrey[50],textAlign:"center"},itemsContainer:{marginTop:"20px !important"},searchInput:{margin:"30px 0px"},itemNameCell:{fontFamily:e.typography.font.family2,color:e.palette.primary.color2,cursor:"pointer",fontWeight:500},greenCell:{color:e.palette.primary.color1,fontWeight:"bold"},orangeCell:{color:e.palette.secondary.color1,fontWeight:"bold"},pagination:{marginTop:20}}})))(b)}}]);