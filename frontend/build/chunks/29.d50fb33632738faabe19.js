(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(652),o=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=e?"error":"success",o=e||t;Object(r.b)(o,{type:n,closeButton:!1,hideProgressBar:!0})}},2086:function(e,t,n){"use strict";t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative"},content:{flex:1,padding:"40px 20px"},form:{flex:1,display:"flex",flexDirection:"column"},formFields:{flex:1,padding:[[0,20]],paddingBottom:20},formHeading:{marginTop:35,marginBottom:15},cancelButtonText:{color:e.palette.primary.color3},primaryContactCheck:{marginTop:10},sectionHeader:{padding:[[20,20]]},component:{}}}},2293:function(e,t,n){"use strict";n.r(t),function(e){var r,o=n(0),a=n.n(o),i=n(4),c=n.n(i),u=n(28),s=n(15),l=n(39),p=n(13),d=n(34),m=n(2),f=n(5),h=n(9),y=n.n(h),v=n(30),b=n.n(v),E=n(27),g=n(10),w=n(11),O=n(2086),I=n(993),x=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),C=function(t,n,r,o){return new(r||(r=e))((function(e,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function c(e){try{u(o.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}u((o=o.apply(t,n||[])).next())}))},F=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isEditMode:!1},t._submitForm=function(e,n){return C(t,void 0,void 0,(function(){var t,r,o,a;return F(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=this.props.initialData,r=this.state.isEditMode,o={name:e.name,inventoryModel:e.inventoryModel,uom:e.uom},r?[3,2]:[4,this.props.createInventory({data:o})];case 1:return(a=i.sent()).success?(Object(w.a)(null,"Inventory created successfully"),n.setSubmitting(!1),this.props.history.push(f.a.INVENTORY())):(a.error.map((function(e){return Object(w.a)(e)})),n.setSubmitting(!1)),[3,4];case 2:return[4,this.props.updateInventory({data:o,where:{id:t.id}})];case 3:(a=i.sent()).success?(Object(w.a)(null,"Inventory updated successfully"),n.setSubmitting(!1),this.props.history.push(f.a.INVENTORY())):(a.error.map((function(e){return Object(w.a)(e)})),n.setSubmitting(!1)),i.label=4;case 4:return[3,6];case 5:return i.sent(),n.setSubmitting(!1),[3,6];case 6:return[2]}}))}))},t}return x(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHeaderTitle("Inventory"),this.setState({isEditMode:Boolean(y()(this.props,(function(e){return e.initialData})))})},t.prototype.componentDidUpdate=function(e){b()(this.props.initialData,e.initialData)||this.setState({isEditMode:Boolean(y()(this.props,(function(e){return e.initialData})))})},t.prototype._renderSectionHeading=function(){var e=this.state.isEditMode,t=this.props.classes;return a.a.createElement(m.SectionHeader,{title:(e?"Update":"Create new")+" Inventory",classes:{component:t.sectionHeader}})},t.prototype._renderInventoryForm=function(e){var t=e.values,n=e.errors,r=e.touched,o=e.handleChange,i=e.handleBlur,u=e.setFieldValue,s=e.setFieldTouched,l="name",p="inventoryModel",d="uom",f="Inventory Name",h="Inventory Costing Model",y="Unit Of Measure",v=this.props.classes;return a.a.createElement(m.ErrorBoundary,null,a.a.createElement("div",{className:v.component},a.a.createElement(c.a,{container:!0,spacing:16},a.a.createElement(c.a,{item:!0,xs:12},a.a.createElement(m.TextField,{label:f,placeholder:"Inventory Name",name:l,id:l,value:t[l],onChange:o,onBlur:i,error:r[l]&&n[l],showClearIcon:!1})),a.a.createElement(c.a,{item:!0,xs:12},a.a.createElement(m.Dropdown,{label:h,placeholder:"Select Inventory Model",name:p,id:p,items:I.a,value:t[p],onChange:function(e){return u(p,e.value)},onClose:function(){return s(p)},error:r[p]&&n[p]})),a.a.createElement(c.a,{item:!0,xs:12},a.a.createElement(m.Dropdown,{label:y,placeholder:"Select Unit of measure",name:d,id:d,items:I.b,value:t[d],onChange:function(e){u(d,e.value)},onClose:function(){return s(d)},error:r[d]&&n[d]})))))},t.prototype._renderForm=function(){var e=this,t=this.props,n=t.initialData,r=t.classes,o=t.theme,i=this.state.isEditMode;return a.a.createElement(l.Formik,{initialValues:{name:y()(n,(function(e){return e.name}))||"",inventoryModel:y()(n,(function(e){return e.inventoryModel}))||"",uom:y()(n,(function(e){return e.uom}))||""},enableReinitialize:!0,validationSchema:p.object().shape({name:p.string().required("Name is required"),inventoryModel:p.string().required("Inventory Model is required"),uom:p.string().required("Unit of Measure is required")}),onSubmit:this._submitForm},(function(t){var n=t.values,u=t.errors,s=t.touched,l=t.handleChange,p=t.handleBlur,d=t.handleSubmit,h=t.isSubmitting,y=t.setFieldValue,v=t.setFieldTouched,b=t.dirty;return a.a.createElement("form",{className:r.form,onSubmit:d},a.a.createElement(c.a,{container:!0,classes:{container:r.formFields}},a.a.createElement(c.a,{item:!0,xs:12,sm:6},e._renderInventoryForm({values:n,errors:u,touched:s,handleChange:l,handleBlur:p,setFieldValue:y,setFieldTouched:v}))),a.a.createElement(c.a,{container:!0,spacing:0},a.a.createElement(c.a,{item:!0,xs:12,sm:b?6:12},a.a.createElement(m.Button,{title:i?"Back to Inventory list":"Cancel",onClick:function(){e.props.history.replace(f.a.INVENTORY())},buttonColor:o.palette.grey[200],classes:{text:r.cancelButtonText}})),b&&a.a.createElement(c.a,{item:!0,xs:12,sm:6},a.a.createElement(m.Button,{loading:h,title:(i?"Update":"Create new")+" Inventory",id:"submit-inventory",buttonColor:o.palette.primary.color2,type:"submit"}))))}))},t.prototype.render=function(){var e=this,t=this.props.classes;return a.a.createElement(m.ErrorBoundary,null,a.a.createElement(E.a,{onChange:function(){e.props.history.push(f.a.INVENTORY())}},a.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderForm())))},t}(o.Component);t.default=Object(d.compose)(Object(u.withI18n)(),Object(g.withCreateInventory)(),Object(g.withUpdateInventory)(),Object(g.withInventory)((function(e){return{id:y()(e,(function(e){return e.match.params.id}))}}),(function(e){var t=e.data;return{initialData:y()(t,(function(e){return e.inventory}))||{}}})),Object(s.b)((function(e){return{profile:e.profile}})),Object(m.withStyles)(O.a))(j)}.call(this,n(21))},27:function(e,t,n){"use strict";var r=n(0),o=n(18),a=n(15),i=n(317),c=n(9),u=n.n(c);t.a=Object(o.compose)(Object(a.b)((function(e){return{selectedCompany:u()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,n=e.onChange,o=e.children;return Object(i.a)((function(){n(t)}),[t]),r.createElement(r.Fragment,null,o)}))},317:function(e,t,n){"use strict";var r=n(30),o=n.n(r),a=n(0);function i(e){var t,n,r=Object(a.useRef)();return t=e,n=r.current,o()(t,n)||(r.current=e),r.current}t.a=function(e,t){Object(a.useEffect)(e,i(t))}},993:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=[{value:"FIFO",label:"FIFO"},{value:"LIFO",label:"LIFO"},{value:"WEIGHTED_AVERAGE",label:"Weighted average"}],o=[{value:"EA",label:"EA"}]}}]);