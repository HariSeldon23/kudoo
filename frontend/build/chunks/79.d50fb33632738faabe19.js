(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{2077:function(e,t,r){"use strict";t.a=function(e){return{page:{backgroundColor:e.palette.primary.color3,padding:45,fontFamily:e.typography.font.family2},title:{color:"white",margin:"10px 0px",fontFamily:e.typography.font.family1,fontSize:"32px",fontWeight:500,textAlign:"center"},toggleButtonWrapper:{maxWidth:400,width:400,margin:"25px auto"},greenTextColor:{color:e.palette.primary.color1},hideForm:{display:"none"},form:{maxWidth:400,margin:"0px auto"},forgotPasswordText:{color:"#fff",textAlign:"center",margin:"10px 0px 20px",cursor:"pointer",fontSize:"14px",textDecoration:"none",display:"block"},formErrorText:{color:"red",margin:"10px 0px 20px 0px",textAlign:"center",fontSize:"15px",fontFamily:e.typography.font.family2},submitBtn:{marginTop:"15px"},tocCheckboxWrapper:{margin:"20px 0px 10px"},tocCheckboxText:{color:"white"},tocLink:{color:e.palette.primary.color2,textDecoration:"underline",cursor:"pointer"},tosModalWrapper:{backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,fontFamily:e.typography.font.family2},tosModal:{maxWidth:"90%",margin:"0px auto",display:"flex",flexDirection:"column",height:"90%"},tosModalHeader:{backgroundColor:"#f4f4f4",padding:"15px 20px",fontFamily:e.typography.font.family1,fontSize:"18px",fontWeight:"bold",color:"#44536f",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between","& .close-icon":{fontSize:"30px",color:"#44536f",cursor:"pointer",padding:"0px 10px"}},tosModalContent:{backgroundColor:"white",padding:"20px",overflowY:"auto",color:"#44536f",lineHeight:"25px",flex:"1",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px","& p":{fontSize:"15px"}}}}},2277:function(e,t,r){"use strict";r.r(t),function(e){var o,a=r(0),n=r(15),s=r(315),i=r(101),l=r(159),c=r(371),p=r(18),m=r(63),u=r(4),d=r.n(u),h=r(39),f=r(13),g=r(9),y=r.n(g),w=r(3),x=r.n(w),b=r(7),E=r.n(b),v=r(2),S=r(5),N=r(477),C=r(10),T=r(651),F=r(2077),_=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),B=function(){return(B=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},P=function(t,r,o,a){return new(o||(o=e))((function(e,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function i(e){try{l(a.throw(e))}catch(e){n(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,i)}l((a=a.apply(t,r||[])).next())}))},R=function(e,t){var r,o,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}},O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeForm:0,isFormSubmitting:!1,loginError:null,signupError:null,shouldShowTOSModal:!1},t._observeRoute=function(){v.helpers.isURLMatching(S.a.LOGIN())?t._changeForm(0):v.helpers.isURLMatching(S.a.SIGNUP())&&t._changeForm(1)},t._changeForm=function(e){t.setState({activeForm:e})},t._navigate=function(e){0===e?t.props.history.push(S.a.LOGIN()):1===e&&t.props.history.push(S.a.SIGNUP())},t._loginPress=function(e,r){return P(t,void 0,void 0,(function(){var t,o,a,n,s,i=this;return R(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),t=m.parse(x()(this.props,"location.search","")),this.setState({isFormSubmitting:!0}),[4,this.props.login({email:e,password:r})];case 1:return(o=l.sent()).success?(a=o.result,this.props.actions.setUserData(B(B({},a),{isLoggedIn:!0})),setTimeout((function(){t.redirect?i.props.history.replace(t.redirect):i.props.history.replace(S.a.DASHBOARD())}))):(n=o.error[0],this.setState({loginError:n,isFormSubmitting:!1})),[3,3];case 2:return s=l.sent(),console.error(s),this.setState({loginError:s.toString(),isFormSubmitting:!1}),[3,3];case 3:return[2]}}))}))},t._signupPress=function(e){return P(t,void 0,void 0,(function(){var t,r,o,a,n,s,i,l;return R(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),t=e.firstName,r=e.lastName,o=e.password,a=e.reTypePassword,n=e.email,this.setState({isFormSubmitting:!0}),[4,this.props.register({email:n,firstName:t,lastName:r,password:o,passwordRepeat:a,baseURL:window.location.origin+"/#/"})];case 1:return(s=c.sent()).success?this.props.history.replace(S.a.CONFIRM_EMAIL()):(i=s.error[0],this.setState({signupError:i,isFormSubmitting:!1})),[3,3];case 2:return l=c.sent(),console.error(l),this.setState({signupError:l.toString(),isFormSubmitting:!1}),[3,3];case 3:return[2]}}))}))},t}return _(t,e),t.prototype.componentDidMount=function(){this.props.profile.isLoggedIn||(console.log("====================clear store==================="),setTimeout(T.b)),this._observeRoute()},t.prototype.componentDidUpdate=function(e,t){(0===this.state.activeForm&&v.helpers.isURLMatching(S.a.SIGNUP())||1===this.state.activeForm&&v.helpers.isURLMatching(S.a.LOGIN()))&&this._observeRoute()},t.prototype._renderLoginForm=function(){var e=this,t=this.props,r=t.classes,o=t.theme;return a.createElement(h.Formik,{initialValues:{email:"",password:""},validationSchema:f.object().shape({email:f.string().email("Invalid email address").required("Email is required!"),password:f.string().min(4).required("Password is required!")}),onSubmit:function(t){e._loginPress(t.email,t.password)}},(function(t){var n=t.values,s=t.errors,l=t.touched,c=t.handleChange,p=t.handleBlur,m=t.handleSubmit;return a.createElement("form",{className:r.form,autoComplete:"off",onSubmit:m},a.createElement(v.TextField,{applyTopBorderRadius:!0,type:"email",name:"email",id:"login_email",placeholder:"Email",icon:l.email&&s.email?a.createElement("i",{className:"icon icon-message"}):a.createElement("i",{className:E()("icon icon-message",r.greenTextColor)}),value:n.email,onChange:c,onBlur:p,autoComplete:"off",error:l.email&&s.email,showErrorMessage:!1}),a.createElement(v.TextField,{applyBottomBorderRadius:!0,type:"password",name:"password",id:"login_password",icon:l.password&&s.password?a.createElement("i",{className:"icon icon-password"}):a.createElement("i",{className:E()("icon icon-password",r.greenTextColor)}),placeholder:"Password",value:n.password,onChange:c,onBlur:p,autoComplete:"off",error:l.password&&s.password,showErrorMessage:!1}),Boolean(e.state.loginError)&&a.createElement("div",{className:r.formErrorText,id:"login_error"},e.state.loginError),a.createElement(i.a,{to:S.a.RESET_PASSWORD(),className:r.forgotPasswordText},"Forgot Password?"),a.createElement(v.Button,{type:"submit",classes:{component:r.submitBtn},title:"Sign in",buttonColor:o.palette.primary.color2,applyBorderRadius:!0,id:"login_button",loading:e.state.isFormSubmitting}))}))},t.prototype._renderSignupForm=function(){var e=this,t=this.props,r=t.classes,o=t.theme;return a.createElement(h.Formik,{initialValues:{firstName:"",lastName:"",email:"",password:"",reTypePassword:"",tocCheckbox:!1},validationSchema:f.object().shape({firstName:f.string().min(2,"Firstname is too short").required("First Name is required!"),lastName:f.string().required("Last Name is required!"),email:f.string().email("Invalid email address").required("Email is required!"),password:f.string().min(4,"Password should be atleast 4 characters").required("Password is required!"),reTypePassword:f.string().oneOf([f.ref("password"),null],"Passwords do not match").required("Retype your Password!"),tocCheckbox:f.boolean().oneOf([!0],"Please read our terms & conditions and agree in order to create your account")}),onSubmit:this._signupPress},(function(t){var n=t.values,s=t.errors,i=t.touched,l=t.handleChange,c=t.handleBlur,p=t.handleSubmit,m=(t.isSubmitting,t.setFieldValue);return a.createElement("form",{className:r.form,autoComplete:"off",onSubmit:p},a.createElement(v.TextField,{applyTopBorderRadius:!0,type:"text",name:"firstName",id:"signup_firstName",placeholder:"First Name",icon:i.firstName&&s.firstName?a.createElement("i",{className:"icon icon-user-account"}):a.createElement("i",{className:E()("icon icon-user-account",r.greenTextColor)}),value:n.firstName,onChange:l,onBlur:c,error:i.firstName&&s.firstName,showErrorMessage:!1}),a.createElement(v.TextField,{type:"text",noBorderRadius:!0,name:"lastName",id:"signup_lastName",placeholder:"Last Name",icon:i.lastName&&s.lastName?a.createElement("i",{className:"icon icon-user-account"}):a.createElement("i",{className:E()("icon icon-user-account",r.greenTextColor)}),value:n.lastName,onChange:l,onBlur:c,error:i.lastName&&s.lastName,showErrorMessage:!1}),a.createElement(v.TextField,{type:"email",noBorderRadius:!0,name:"email",id:"signup_email",placeholder:"Email",icon:i.email&&s.email?a.createElement("i",{className:"icon icon-message"}):a.createElement("i",{className:E()("icon icon-message",r.greenTextColor)}),value:n.email,onChange:l,onBlur:c,error:i.email&&s.email,showErrorMessage:!1}),a.createElement(v.TextField,{type:"password",noBorderRadius:!0,name:"password",id:"signup_password",icon:i.password&&s.password?a.createElement("i",{className:"icon icon-password"}):a.createElement("i",{className:E()("icon icon-password",r.greenTextColor)}),placeholder:"Password",value:n.password,onChange:l,onBlur:c,error:i.password&&s.password,showErrorMessage:!1}),a.createElement(v.TextField,{applyBottomBorderRadius:!0,type:"password",name:"reTypePassword",id:"signup_reTypePassword",icon:i.reTypePassword&&s.reTypePassword?a.createElement("i",{className:"icon icon-password"}):a.createElement("i",{className:E()("icon icon-password",r.greenTextColor)}),placeholder:"Re-Type Password",value:n.reTypePassword,onChange:l,onBlur:c,error:i.reTypePassword&&s.reTypePassword,showErrorMessage:!1}),a.createElement(v.Checkbox,{value:n.tocCheckbox,onChange:function(e){m("tocCheckbox",e)},id:"terms-condition",label:a.createElement("span",null,"I agree to"," ",a.createElement("span",{className:r.tocLink,onClick:function(){e.setState({shouldShowTOSModal:!0})}},"Terms & Conditions")),classes:{label:r.tocCheckboxText,component:r.tocCheckboxWrapper},error:s.tocCheckbox}),Boolean(e.state.signupError)&&a.createElement("div",{className:r.formErrorText},e.state.signupError),a.createElement(v.Button,{type:"submit",classes:{component:r.submitBtn},buttonColor:o.palette.primary.color2,title:"Create an account",applyBorderRadius:!0,id:"signup_button",loading:e.state.isFormSubmitting}))}))},t.prototype._renderTOSModal=function(){var e=this,t=this.props.classes;return a.createElement(c.a,null,a.createElement("div",{className:t.tosModalWrapper},a.createElement("div",{className:t.tosModal},a.createElement("div",{className:t.tosModalHeader},a.createElement("span",null,"Terms & Conditions"),a.createElement("i",{className:"fa fa-times close-icon",onClick:function(){e.setState({shouldShowTOSModal:!1})}})),a.createElement("div",{className:t.tosModalContent},a.createElement(v.TermsOfService,null)))))},t.prototype.render=function(){var e=this,t=this.state.activeForm,o=this.props.classes;return y()(this.props,(function(e){return e.profile.isLoggedIn}))?a.createElement(s.a,{to:S.a.DASHBOARD()}):a.createElement(v.ErrorBoundary,null,a.createElement("div",{className:o.page},a.createElement("div",{className:o.title},a.createElement("a",{href:"https://kudoo.io/"},a.createElement("img",{src:r(2209),alt:"Kudoo",style:{maxWidth:"160px"}}))),a.createElement(d.a,{container:!0,justify:"center"},a.createElement(d.a,{item:!0,xs:12},a.createElement(v.ToggleButton,{labels:["Sign In","Create Account"],selectedIndex:this.state.activeForm,classes:{component:o.toggleButtonWrapper},activeColor:"#2bc88f",onChange:function(t,r){e._navigate(r)}}))),a.createElement(d.a,{container:!0,justify:"center"},a.createElement(d.a,{item:!0,xs:12,classes:1===t?{item:o.hideForm}:{}},this._renderLoginForm()),a.createElement(d.a,{item:!0,xs:12,classes:0===t?{item:o.hideForm}:{}},this._renderSignupForm())),this.state.shouldShowTOSModal&&this._renderTOSModal()))},t}(a.Component);t.default=Object(p.compose)(Object(v.withStyles)(F.a),Object(n.b)((function(e){return{profile:e.profile,app:e.app}}),(function(e){return{actions:Object(l.bindActionCreators)(B({},N.a),e)}})),Object(C.withLogin)(),Object(C.withRegister)())(O)}.call(this,r(21))}}]);