(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{11:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(652),r=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var a=e?"error":"success",r=e||t;Object(n.b)(r,{type:a,closeButton:!1,hideProgressBar:!0})}},2096:function(e,t,a){"use strict";var n,r=a(0),i=a.n(r),l=a(2),o=a(254),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),s=function(){return(s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={emails:{to:[],bcc:[],cc:[]}},t}return c(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.classes,n=t.onClose,r=t.visible,o=t.submitting,c=this.state.emails,m=c.to.length<=0||o;return i.a.createElement(l.Modal,{visible:r,onClose:n,title:"Send invoice to customer?",description:i.a.createElement("div",null,i.a.createElement("div",null,"If you proceed we will send this invoice to your customer. If you are unsure then rather cancel and save it as a draft."),i.a.createElement("br",null),i.a.createElement("div",null,"Please add emails"),i.a.createElement(l.EmailInputFields,{classes:{component:a.emailInputs},onEmailChange:function(t){var a=e.state.emails;e.setState({emails:s(s({},a),t)})}}),i.a.createElement("br",null),i.a.createElement("div",null,"Are you sure you want to send this invoice to your customer?")),buttons:[{title:"Cancel",type:"cancel",onClick:n},{title:o?"Submitting...":"Submit",isDisabled:m,loading:o,onClick:function(){return e.props.onSubmit(c)}}]})},t.defaultProps={onClose:function(){},submitting:!1},t}(r.Component);t.a=Object(l.withStyles)(o.d)(m)},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s}));var n="YYYY-MM-DD[T]HH:mm:ss.SSS[Z]",r={FIXED:"FIXED",TIME_BASED:"TIME_BASED"},i={STARTED:"STARTED",CLOSED:"CLOSED"},l={PROJECT_ENDS:"PROJECT_ENDS",PROJECT_STARTS:"PROJECT_STARTS"},o={APPROVED:"APPROVED",DRAFT:"DRAFT",FINALISED:"FINALISED",INVOICED:"INVOICED"},c={APPROVED:"APPROVED",ARCHIVED:"ARCHIVED",DRAFT:"DRAFT",FULLY_PAID:"FULLY_PAID",UNPAID:"UNPAID",PARTIALLY_PAID:"PARTIALLY_PAID",PROPOSED:"PROPOSED",REJECTED:"REJECTED"},s={PROJECT:"PROJECT",TIMESHEET:"TIMESHEET",TIMESHEET_WITH_DETAILS:"TIMESHEET_WITH_DETAILS",FREE_TEXT:"FREE_TEXT"}},254:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),t.a=function(e){return{page:{flex:1,display:"flex",flexDirection:"column",position:"relative",padding:"40px 20px"},createInvoiceBox:{backgroundColor:e.palette.grey[100],borderRadius:5,marginTop:40,padding:30},createInvoiceTitle:{fontFamily:e.typography.font.family1,fontWeight:"bold",fontSize:24,color:e.palette.grey[400],marginBottom:30,textAlign:"center"},ways:{display:"flex",width:"75%",alignItems:"center",margin:"0px auto",justifyContent:"space-between"},invoiceWayWrapper:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,marginRight:20,alignSelf:"stretch"},invoiceWay:{backgroundColor:e.palette.primary.color2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:5,width:"100%",textAlign:"center",height:"100%",padding:"30px 0px",cursor:"pointer","&:hover":{backgroundColor:e.palette.shadow.color2}},wayIcon:{color:"white",fontSize:40,marginBottom:15},wayTitle:{color:"white",fontSize:18,fontFamily:e.typography.font.family2,fontWeight:"500"},questionIcon:{color:e.palette.grey[400],fontSize:40,marginTop:15,"&:hover":{color:e.palette.primary.color1}},prevNextWrapper:{display:"flex",alignItems:"center"},prevNextButton:{width:180,margin:"0px 10px"}}};var n=function(e){return{form:{marginTop:20},input:{marginTop:10,position:"relative"},paymentOptions:{display:"flex",alignItems:"center"},paymentOption:{marginRight:10,border:"1px solid "+e.palette.primary.color2,borderRadius:5,cursor:"pointer",minWidth:100,padding:20,color:e.palette.primary.color2,textAlign:"center","&.selected":{backgroundColor:e.palette.primary.color2,color:"white"}},errorText:{fontWeight:300,fontSize:14,color:e.palette.secondary.color1,marginBottom:10,marginTop:3,whiteSpace:"nowrap",textOverflow:"ellipsis",wordBreak:"normal",wordWrap:"normal",overflow:"hidden"},addBankText:{fontWeight:500,fontSize:16,color:e.palette.secondary.color1,fontFamily:e.typography.font.family2,marginBottom:10,marginTop:3,display:"flex",alignItems:"center","& a":{color:e.palette.primary.color2,margin:[[0,5]]},"& a:hover":{color:"#1d96c5",textDecoration:"underline"}},paymentTextValue:{fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.blueGrey[50],fontWeight:"500",marginBottom:7},attachWrapper:{display:"flex",alignItems:"center"},dragAreaWrapper:{width:"auto",height:"auto",border:"0px",cursor:"pointer"},activeDragArea:{backgroundColor:e.palette.grey[100]},attachButton:{height:52,display:"flex",alignItems:"center",justifyContent:"center",fontSize:25,padding:"0px 20px",backgroundColor:e.palette.primary.color2,marginTop:38,color:"white",borderTopRightRadius:5,borderBottomRightRadius:5},searchInput:{borderTopRightRadius:0,borderBottomRightRadius:0},attachedFilesBlock:{display:"flex",alignItems:"center",flexWrap:"wrap"},attachementBlock:{border:"2px dashed "+e.palette.primary.color2,borderRadius:5,padding:10,marginTop:10}}},r=function(e){return{content:{marginTop:"50px !important"},sendInvoiceButton:{width:200,margin:"0px 10px"},companyLogo:{width:250,height:88,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundColor:e.palette.shadow.color1,borderRadius:5,alignItems:"center",justifyContent:"center",display:"flex",color:"white",fontSize:40},invoiceTitleRightPart:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"space-between"},invoiceHeader:{backgroundColor:e.palette.primary.color1,padding:20,marginTop:10},invoiceNumber:{color:e.palette.shadow.color1,fontFamily:e.typography.font.family1,fontSize:25,display:"flex",alignItems:"center"},invoiceName:{color:"white",fontSize:30,marginTop:15,fontFamily:e.typography.font.family1},invoiceDateWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:20,backgroundColor:e.palette.grey[100]},invoiceDateBlock:{},invoiceDateLabel:{fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.grey[700],marginBottom:8},invoiceDateValue:{fontFamily:e.typography.font.family2,fontSize:16,fontWeight:"bold",color:e.palette.grey[700],marginBottom:8},invoiceDatePeriod:{fontFamily:e.typography.font.family2,fontSize:16,fontStyle:"italic",color:e.palette.grey[700]},invoiceCustomer:{border:"1px solid "+e.palette.grey[300],borderTop:0,padding:20},invoiceSectionTitle:{fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.blueGrey[50],fontWeight:"500",marginBottom:10},invoiceTextValue:{fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.blueGrey[50],fontWeight:"300",marginBottom:7},invoiceService:{border:"1px solid "+e.palette.grey[300],borderTop:0,padding:20},gstLabel:{marginRight:20},gstCell:{display:"flex",alignItems:"center",justifyContent:"space-between"},gstStatus:{fontSize:13,fontFamily:e.typography.font.family2,color:e.palette.grey[400]},gstHeaderCell:{width:"13%",padding:[[0,10]]},smallTextCell:{fontSize:14,padding:[[0,10]]},bigWidthCell:{width:"80%",padding:[[0,10]]},smallWidthCell:{width:"7%",padding:[[0,10]]},mediumWidthCell:{width:"20%",padding:[[0,10]]},borderCell:{paddingLeft:10,paddingRight:10,borderLeft:"1px solid "+e.palette.grey[200],minHeight:50,display:"flex",alignItems:"center"},subtotalWrapper:{backgroundColor:e.palette.grey[100],padding:15,display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid "+e.palette.grey[300],borderTop:0},subtotalText:{fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.grey[700],fontWeight:"300"},balanceDueWrapper:{backgroundColor:e.palette.primary.color1,display:"flex",alignItems:"center",justifyContent:"space-between",padding:15},balanceDueText:{fontFamily:e.typography.font.family1,fontSize:32,color:"white",fontWeight:"bold"},invoiceMessage:{border:"1px solid "+e.palette.grey[300],borderTop:0,padding:20},invoiceAttachments:{border:"1px solid "+e.palette.grey[300],borderTop:0,padding:20},invoiceAttachedFiles:{display:"flex",alignItems:"center",flexWrap:"wrap"},payWrapper:{display:"flex",alignItems:"center"},payNowSection:{border:"1px solid "+e.palette.grey[300],borderTop:0,padding:20,alignSelf:"stretch",display:"flex",justifyContent:"center",flexDirection:"column"},payNowText:{fontFamily:e.typography.font.family1,fontSize:44,color:e.palette.blueGrey[50],fontWeight:"bold",marginBottom:10},secureWrapper:{border:"1px solid "+e.palette.grey[300],borderTop:0,borderLeft:0,padding:20,display:"flex",flex:1,justifyContent:"space-between"},secureBtns:{display:"flex",alignItems:"center"},secureBtn:{marginRight:8,width:180},invoiceNote:{fontFamily:e.typography.font.family1,fontSize:16,color:e.palette.blueGrey[50],fontWeight:"500",margin:"20px 0px"}}},i=function(e){return{emailInputs:{marginTop:15}}}},27:function(e,t,a){"use strict";var n=a(0),r=a(18),i=a(15),l=a(317),o=a(9),c=a.n(o);t.a=Object(r.compose)(Object(i.b)((function(e){return{selectedCompany:c()(e,(function(e){return e.profile.selectedCompany}))}})))((function(e){var t=e.selectedCompany,a=e.onChange,r=e.children;return Object(l.a)((function(){a(t)}),[t]),n.createElement(n.Fragment,null,r)}))},317:function(e,t,a){"use strict";var n=a(30),r=a.n(n),i=a(0);function l(e){var t,a,n=Object(i.useRef)();return t=e,a=n.current,r()(t,a)||(n.current=e),n.current}t.a=function(e,t){Object(i.useEffect)(e,l(t))}},357:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));var n=a(996),r=a.n(n),i=a(997),l=a.n(i),o=function(t,a,n,r){return new(n||(n=e))((function(e,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(l,o)}c((r=r.apply(t,a||[])).next())}))},c=function(e,t){var a,n,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},s=function(e){return o(void 0,void 0,void 0,(function(){var t,a,n,i,o,s;return c(this,(function(c){switch(c.label){case 0:return t=new l.a("p","pt","letter",!0),[4,r()(document.getElementById(e),{useCORS:!0})];case 1:return a=c.sent(),n=a.toDataURL("image/png"),i=a.height/a.width,o=t.internal.pageSize.getWidth(),s=o*i,t.addImage(n,"png",0,0,o,s,"","FAST"),[2,t.output("blob")]}}))}))}}).call(this,a(21))},467:function(e,t,a){"use strict";var n,r=a(0),i=a.n(r),l=a(28),o=a(15),c=a(101),s=a(34),m=a(637),u=a.n(m),d=a(3),p=a.n(d),v=a(4),f=a.n(v),y=a(39),b=a(13),h=a(24),g=a.n(h),E=a(251),T=a(2),x=a(5),C=a(10),N=a(11),I=a(108),S=a(9),D=a.n(S),w=a(254),_=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),A=function(){return(A=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},O=function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],l=0,o=i.length;l<o;l++,r++)n[r]=i[l];return n},W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t._getTitle=function(){var e=t.props.createType;return"text"===e?{title:"Create a free text invoice",subtitle:"Let's begin by selecting an option below. If you are unsure select the question mark provided."}:"project"===e?{title:"Create an invoice using a project",subtitle:"Creating an invoice from a project is a quick way to easily create an invoice from a project which you have already defined."}:"timesheet"===e?{title:"Create an invoice using a timesheet",subtitle:"Creating an invoice from a timesheet is a quick way to easily create an invoice from a timesheet which you have already defined."}:{}},t._goToNextStep=function(){var e=t.props,a=e.makeStepActive,n=e.markedVisited;a(3),n(2)},t._togglePaymentOption=function(e){var t=e.values,a=e.setFieldValue,n=e.type,r=e.setFieldTouched,i=t.options;i.push(n),a("options",u()(i)),r("options")},t._onSubmitForm=function(e){var a=t.props,n=a.createType,r=a.company;p()(r,"data.bankAccount")?(t.props.updatePaymentInfo(n,e),t._goToNextStep()):Object(N.a)("Please add bank account")},t._calculateDays=function(e,t){if(t&&e){var a=g()(t),n=g()(e);return a.diff(n,"days")}return!1},t._onFieldChange=function(e,a,n){var r,i=t.props.createType;t.props.updatePaymentInfo(i,((r={})[e]=a,r)),n(e,a)},t._onDropAttachments=function(e){var a,n=t.props,r=n.createType,i=n.newInvoice;a=p()(i,r+".payment.attachments",[]).filter((function(e){return e instanceof File})),t.props.updatePaymentInfo(r,{attachments:O(a,e)})},t._removeAttachment=function(e){var a=t.props,n=a.createType,r=a.newInvoice,i=p()(r,n+".payment.attachments",[]);i.splice(e,1),t.props.updatePaymentInfo(n,{attachments:O(i)})},t}return _(t,e),t.prototype._renderForm=function(e){var t=this,a=e.values,n=e.errors,r=e.touched,l=e.handleSubmit,o=e.handleBlur,s=e.setFieldValue,m=this.props,u=m.classes,d=m.company,v=m.profile,y=m.newInvoice,b=m.createType,h=m.i18n,C=p()(v,"selectedCompany.id"),N=p()(y,b+".customer")||{},I=p()(y,b+".payment.attachments",[]);return I=I.filter((function(e){return e instanceof File})),i.a.createElement("form",{className:u.form,onSubmit:l},i.a.createElement("div",{className:u.input},i.a.createElement(T.FieldLabel,{label:"Customer Payment"}),p()(d,"data.bankAccount")?i.a.createElement("div",null,i.a.createElement("div",{className:u.paymentTextValue},N.name),i.a.createElement("div",{className:u.paymentTextValue,"data-test":"bank-name"},p()(d,"data.bankAccount.name")),i.a.createElement("div",{className:u.paymentTextValue},h._("BSB"),": ",p()(d,"data.bankAccount.code")),i.a.createElement("div",{className:u.paymentTextValue},h._("Account Number"),":"," ",p()(d,"data.bankAccount.accountNumber")),i.a.createElement("div",{className:u.addBankText},i.a.createElement(c.a,{"data-test":"bank-link",style:{margin:0},to:x.a.COMPANY_BANKING({companyId:C})+"?redirect="+encodeURIComponent(location.hash.substr(1))},"Update Information"))):i.a.createElement("div",{className:u.paymentOptions},i.a.createElement("div",{className:u.addBankText},"Please"," ",i.a.createElement(c.a,{"data-test":"bank-link",to:x.a.COMPANY_BANKING({companyId:C})+"?redirect="+encodeURIComponent(location.hash.substr(1))},"add bank")," ","information"))),i.a.createElement("div",{className:u.input},i.a.createElement(f.a,{container:!0,spacing:8},i.a.createElement(f.a,{item:!0,sm:4},i.a.createElement(T.DatePicker,{textFieldProps:{label:"Invoice Date",error:r.invoiceDate&&n.invoiceDate,id:"invoice-date-input"},value:a.invoiceDate,onDateChange:function(e){t._onFieldChange("invoiceDate",e,s);var n=t._calculateDays(e,a.dueDate);!1!==n&&t._onFieldChange("numberOfDays",String(n),s)}})),i.a.createElement(f.a,{item:!0,sm:4},i.a.createElement(T.DatePicker,{textFieldProps:{label:"Due Date",error:r.dueDate&&n.dueDate,id:"due-date-input"},value:a.dueDate,onDateChange:function(e){t._onFieldChange("dueDate",e,s);var n=t._calculateDays(a.invoiceDate,e);!1!==n&&t._onFieldChange("numberOfDays",String(n),s)}})),i.a.createElement(f.a,{item:!0,sm:3},i.a.createElement(T.TextField,{placeholder:"0",id:"numberOfDays",name:"numberOfDays",isNumber:!0,onChangeText:function(e){var n=Number(e||0);if(n>=0){var r=g()(a.invoiceDate).add(n,"days");t._onFieldChange("dueDate",g()(r).format("YYYY-MM-DD"),s)}t._onFieldChange("numberOfDays",String(n),s)},label:"Number of Days",value:a.numberOfDays,error:r.numberOfDays&&n.numberOfDays})))),i.a.createElement("div",{className:u.input},i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,sm:8},i.a.createElement(T.TextField,{id:"message",name:"message",value:a.message,onChangeText:function(e){t._onFieldChange("message",e,s)},onBlur:o,placeholder:"Message",label:"Message to be displayed on Invoice",multiline:!0,error:r.message&&n.message})))),i.a.createElement("div",{className:u.input},i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,sm:8},i.a.createElement(E.default,{multiple:!0,className:u.dragAreaWrapper,activeClassName:u.activeDragArea,onDropAccepted:this._onDropAttachments},i.a.createElement("div",{className:u.attachWrapper},i.a.createElement(T.TextField,{classes:{textInputWrapper:u.searchInput},placeholder:"Browser from Computer",label:"Attach document",isReadOnly:!0}),i.a.createElement("div",{className:u.attachButton},i.a.createElement("i",{className:"ion-android-attach"}))),I.length>0&&i.a.createElement("div",{className:u.attachementBlock},i.a.createElement("div",{className:u.attachedFilesBlock},I.map((function(e,a){return i.a.createElement(T.FileBlock,{key:a,file:e,variant:"interactive",onRemoveClick:function(e){e.stopPropagation(),t._removeAttachment(a)}})})))))))))},t.prototype.render=function(){var e=this,t=this.props,a=t.classes,n=t.makeStepActive,r=t.unmarkedVisited,l=t.theme,o=t.createType,c=t.newInvoice,s=this._getTitle(),m=s.title,u=s.subtitle,d=p()(c,o+".payment",{});return i.a.createElement("div",null,i.a.createElement(y.Formik,{enableReinitialize:!0,initialValues:{options:p()(d,"options",[]),invoiceDate:p()(d,"invoiceDate")||g()().format("YYYY-MM-DD"),dueDate:p()(d,"dueDate",""),numberOfDays:p()(d,"numberOfDays",""),message:p()(d,"message","")},validationSchema:b.object().shape({invoiceDate:b.string().required("Invoice date required"),dueDate:b.string().required("Due date required"),numberOfDays:b.string().required("Number of days required")}),onSubmit:this._onSubmitForm},(function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.SectionHeader,{title:m,subtitle:u,renderLeftPart:function(){return i.a.createElement("div",{className:a.prevNextWrapper},i.a.createElement(T.Button,{title:"Prev",classes:{component:a.prevNextButton},applyBorderRadius:!0,compactMode:!0,buttonColor:l.palette.primary.color2,withoutBackground:!0,onClick:function(){n(1),r(1)}}),i.a.createElement(T.Button,{id:"next-button",title:"Next",classes:{component:a.prevNextButton},applyBorderRadius:!0,compactMode:!0,buttonColor:l.palette.primary.color2,onClick:t.submitForm}))}}),i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,xs:12,sm:9},e._renderForm(t))))})))},t}(r.Component);t.a=Object(s.compose)(Object(l.withI18n)(),Object(T.withStyles)(Object(T.composeStyles)(w.a,w.b)),Object(o.b)((function(e){return{profile:e.profile,newInvoice:D()(e,(function(e){return e.sessionData.newInvoice}))}}),A({},I)),Object(C.withCompany)((function(e){return{id:p()(e,"profile.selectedCompany.id")}})))(W)},468:function(e,t,a){"use strict";(function(e){var n,r=a(0),i=a.n(r),l=a(7),o=a.n(l),c=a(3),s=a.n(c),m=a(35),u=a.n(m),d=a(999),p=a.n(d),v=a(28),f=a(9),y=a.n(f),b=a(15),h=a(18),g=a(24),E=a.n(g),T=a(4),x=a.n(T),C=a(2),N=a(5),I=a(10),S=a(357),D=a(108),w=a(11),_=a(25),A=a(2096),O=a(254),W=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),k=function(){return(k=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},P=function(t,a,n,r){return new(n||(n=e))((function(e,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(l,o)}c((r=r.apply(t,a||[])).next())}))},R=function(e,t){var a,n,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},j=function(e){function t(t){var a=e.call(this,t)||this;return a._generatePDF=function(){return P(a,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,Object(S.a)("pdf-content")];case 1:return[2,e.sent()]}}))}))},a._getTitle=function(){var e=a.props.createType;return"text"===e?{title:"Create a free text invoice",subtitle:"Review your newly created invoice below. If you need to make changes then select the given step above. This invoice is a true representation of what your customer will see."}:"project"===e?{title:"Create an invoice using a project",subtitle:"Creating an invoice from a project is a quick way to easily create an invoice from a project which you have already defined."}:"timesheet"===e?{title:"Create an invoice using a timesheet",subtitle:"Creating an invoice from a timesheet is a quick way to easily create an invoice from a timesheet which you have already defined."}:{}},a._getTextInvoiceItems=function(){var e=a.props,t=e.newInvoice,n=e.createType;return s()(t,n+".tableData",[]).map((function(e,t){return{order:t+1,description:"",name:e.service,price:Number(e.rate),quantity:Number(e.quantity),tax:e.includeConsTax?Number(e.gst):0}}))},a._getProjectInvoiceItems=function(){var e=a.props,t=e.newInvoice,n=e.createType,r=s()(t,n+".tableData",[]);r=r.filter((function(e){return e.select}));var i=s()(t,n+".project",[]);return r.map((function(e,t){return{order:t+1,description:"",name:e.service,price:Number(e.amount),quantity:Number(1),tax:e.includeConsTax?Number(e.gst):0,project:{connect:{id:i.id}},service:{connect:{id:e.serviceId}}}}))},a._getTimesheetInvoiceItems=function(){var e=a.props,t=e.newInvoice,n=e.createType,r=s()(t,n+".showTimesheetDetails",!1),i=s()(t,n+".tableData",[]);return(i=i.filter((function(e){return e.select}))).map((function(e,t){var a;return(a={order:t+1,description:e.time_period,name:e.service,price:Number(e.rate),quantity:Number(e.quantity),tax:e.includeConsTax?Number(e.gst):0,service:{connect:{id:e.serviceId}}})[r?"timeSheetEntry":"timeSheet"]={connect:{id:r?e.entryId:e.timeSheetId}},a}))},a._updateServiceRules=function(){return P(a,void 0,void 0,(function(){var e,t,a,n,r,i,l,o,c,m,d,p,v,f,y;return R(this,(function(b){switch(b.label){case 0:for(e=this.props,t=e.newInvoice,a=e.createType,n=s()(t,a+".tableData",[]),r=s()(t,a+".project",{}),n=n.filter((function(e){return e.select})),i=[],l=0;l<n.length;l++)(o=n[l]).amountEditable&&(c=o.rules||[],m=Number(o.maxAmount),d=Number(o.amount),p=m-Number(o.amount),v=u()(c,{type:_.d.PROJECT_STARTS}),f=u()(c,{type:_.d.PROJECT_ENDS}),y=[{where:{id:v.id},data:{amount:d,percent:100*d/m,isPercent:!1}},{where:{id:f.id},data:{amount:p,percent:100*p/m,isPercent:!1}}],i.push({where:{id:o.id},data:{rules:{update:y}}}));return i.length>0?[4,this.props.updateProject({where:{id:r.id},data:{projectService:{update:i}}})]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}}))}))},a._markTimeSheetEntriesInvoiced=function(){return P(a,void 0,void 0,(function(){var e,t,a,n,r,i,l,o,c,m,u,d;return R(this,(function(v){switch(v.label){case 0:e=this.props,t=e.newInvoice,a=e.createType,n=s()(t,a+".showTimesheetDetails",!1),r=(r=s()(t,a+".tableData",[])).filter((function(e){return e.select})),i=p()(r,"timeSheetId"),l=Object.keys(i),o=0,v.label=1;case 1:return o<l.length?(c=l[o],m=i[c],u=[],u=n?m.reduce((function(e,t){return[].concat(e,t.entryId)}),[]):m.reduce((function(e,t){return[].concat(e,t.entriesId)}),[]),d={where:{id:c},data:{timeSheetEntries:{update:(u||[]).map((function(e){return{where:{id:e},data:{isInvoiced:!0}}}))}}},[4,this.props.updateTimeSheet(d)]):[3,4];case 2:v.sent(),v.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},a._createInvoice=function(e){return P(a,void 0,void 0,(function(){var t,a,n,r,i,l,o,c,m,u,d,p,v,f,y,b,h;return R(this,(function(g){switch(g.label){case 0:return g.trys.push([0,15,,16]),t=this.props,a=t.newInvoice,n=t.createType,r=t.history,this.setState({submitting:!0}),i=s()(a,n+".payment",{}),l=s()(a,n+".customer",{}),o=s()(i,"attachments",[]).filter((function(e){return e instanceof File})),c=s()(a,n+".showTimesheetDetails",!1),[4,this._generatePDF()];case 1:return m=g.sent(),u=new File([m],"invoice.pdf"),d=_.c.FREE_TEXT,"project"===n?d=_.c.PROJECT:"timesheet"===n&&(d=c?_.c.TIMESHEET_WITH_DETAILS:_.c.TIMESHEET),p={title:"Invoice",description:i.message||"",invoiceDate:E()(i.invoiceDate).format("YYYY-MM-DD"),dueDate:E()(i.dueDate).format("YYYY-MM-DD"),status:_.b.DRAFT,type:d,attachments:o,buyer:{connect:{id:l.id}},preview:u},v=[],d!==_.c.TIMESHEET&&d!==_.c.TIMESHEET_WITH_DETAILS?[3,2]:(v=this._getTimesheetInvoiceItems(),[3,5]);case 2:return d!==_.c.PROJECT?[3,3]:(v=this._getProjectInvoiceItems(),[3,5]);case 3:return d!==_.c.FREE_TEXT?[3,5]:(v=this._getTextInvoiceItems(),l.isAlreadySaved?[3,5]:[4,this.props.createCustomer({data:{name:l.name,govNumber:l.govNumber,contacts:{create:[{name:l.contactName,surname:l.contactSurname,email:l.email}]}}})]);case 4:(f=g.sent()).success?p.buyer={connect:{id:f.result.id}}:f.error.map((function(e){return Object(w.a)(e)})),g.label=5;case 5:return p.items=v.length>0?{create:v}:void 0,[4,this.props.createInvoice({data:p})];case 6:return(y=g.sent()).success?(b=s()(y,"result.id"),d!==_.c.TIMESHEET&&d!==_.c.TIMESHEET_WITH_DETAILS?[3,8]:[4,this._markTimeSheetEntriesInvoiced()]):[3,13];case 7:return g.sent(),[3,10];case 8:return d!==_.c.PROJECT?[3,10]:[4,this._updateServiceRules()];case 9:g.sent(),g.label=10;case 10:return e.to||e.bcc||e.cc?[4,this.props.invoiceNotify({data:{invoiceId:b,to:(e.to||[]).map((function(e){return e.email})),bcc:(e.bcc||[]).map((function(e){return e.email})),cc:(e.cc||[]).map((function(e){return e.email}))}})]:[3,12];case 11:g.sent(),g.label=12;case 12:return this.setState({submitting:!1}),this.props.resetInvoiceData(n),Object(w.a)(null,"Invoice created successfully"),r.push(N.a.INVOICES()),[3,14];case 13:this.setState({submitting:!1}),y.error.map((function(e){return Object(w.a)(e)})),g.label=14;case 14:return[3,16];case 15:return h=g.sent(),this.setState({submitting:!1}),Object(w.a)(h.toString()),[3,16];case 16:return[2]}}))}))},a._showSendInvoiceDialog=function(){a.setState({showInvoiceModal:!0})},a._finaliseInvoice=function(){return P(a,void 0,void 0,(function(){return R(this,(function(e){try{this._createInvoice({})}catch(e){Object(w.a)(e.toString())}return[2]}))}))},a._renderLogo=function(){var e=a.props,t=e.classes,n=e.profile,r=e.company,l=s()(r,"data.logo.url",""),o=s()(n,"selectedCompany.name");return l?l?i.a.createElement("div",{className:t.companyLogo,style:{backgroundImage:"url("+l+")"}}):null:i.a.createElement("div",{className:t.invoiceName,style:{marginTop:0}},o)},a.invoiceNumber=Math.floor(9e4*Math.random())+1e4,a.state={showInvoiceModal:!1,submitting:!1},a}return W(t,e),t.prototype.componentDidMount=function(){},t.prototype._loadBase64Image=function(){var e=this.props.company,t=s()(e,"data.logo.url"),a=this;if(t){this.setState({logoIsLoading:!0});var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var e,t=document.createElement("canvas"),n=t.getContext("2d");t.height=this.naturalHeight,t.width=this.naturalWidth,n.drawImage(this,0,0),e=t.toDataURL("image/png"),a.setState({logo:e,logoIsLoading:!1})},n.src=t,(n.complete||void 0===n.complete)&&(n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",n.src=t)}else this.setState({logoIsLoading:!1,logo:""})},t.prototype._renderTextInvoiceServices=function(){var e,t=this,a=this.props,n=a.classes,r=a.newInvoice,l=a.createType,c=a.i18n,m=[{id:"service",label:"Service",classes:{cellValueText:n.smallTextCell,tableHeaderCellWrapper:n.mediumWidthCell}},{id:"quantity",label:"Qty.",classes:{cellValueText:n.smallTextCell,tableHeaderCellWrapper:n.smallWidthCell}},{id:"rate",label:"Rate",classes:{cellValueText:n.smallTextCell,tableHeaderCellWrapper:n.smallWidthCell}},{id:"amount",label:"Amount",classes:{cellValueText:n.smallTextCell,tableHeaderCellWrapper:n.smallWidthCell}},{id:"gst",label:c._("GST"),classes:{cellValueText:n.smallTextCell,tableHeaderCellWrapper:n.mediumWidthCell}}],u=s()(r,l+".tableData",[]),d=0,p=0;return u.map((function(e){d+=e.amount,e.includeConsTax&&(p+=e.gst)})),e=p+d,i.a.createElement("div",null,i.a.createElement(C.Table,{classes:{component:n.serviceTable},columnData:m,data:u,stripe:!1,sortable:!1,showRemoveIcon:!1,cellRenderer:function(e,a,n){var r=t.props.classes;return"gst"===a.id?i.a.createElement("div",{className:o()(r.gstCell,r.borderCell)},i.a.createElement("span",{className:r.gstLabel},e.includeConsTax?c._("currency-symbol")+""+e[a.id]:c._("currency-symbol")+"0"),i.a.createElement("span",{className:r.gstStatus},i.a.createElement("span",null,e.includeConsTax?"Incl ":"Excl ")," ",c._("GST"))):"quantity"===a.id?i.a.createElement("div",{className:r.borderCell},e[a.id]):"rate"===a.id||"amount"===a.id?i.a.createElement("div",{className:r.borderCell},c._("currency-symbol"),""+e[a.id]):n}}),i.a.createElement(x.a,{container:!0,spacing:0},i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:n.subtotalWrapper},i.a.createElement("div",{className:n.subtotalText},"Sub Total"),i.a.createElement("div",{className:n.subtotalText},c._("currency-symbol"),d))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:n.subtotalWrapper},i.a.createElement("div",{className:n.subtotalText},c._("GST")),i.a.createElement("div",{className:n.subtotalText},c._("currency-symbol"),p))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:n.subtotalWrapper},i.a.createElement("div",{className:n.subtotalText},"Total"),i.a.createElement("div",{className:n.subtotalText},c._("currency-symbol"),e))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:n.balanceDueWrapper},i.a.createElement("div",{className:n.balanceDueText},"Balance Due"),i.a.createElement("div",{className:n.balanceDueText,"data-test":"balance-due"},c._("currency-symbol"),e)))))},t.prototype._renderProjectInvoiceServices=function(){var e=this,t=this.props,a=t.classes,n=t.newInvoice,r=t.createType,l=t.i18n,c=[{id:"service",label:"Service",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}},{id:"billingType",label:"Type",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}},{id:"amount_str",label:"Amount",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.smallWidthCell}},{id:"gst_str",label:l._("GST"),classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}}],m=s()(n,r+".tableData",[]);m=m.filter((function(e){return e.select}));var u=0,d=0;return m.map((function(e){u+=e.amount,e.includeConsTax&&(d+=e.gst)})),i.a.createElement("div",null,i.a.createElement(C.Table,{classes:{component:a.serviceTable},columnData:c,data:m,stripe:!1,sortable:!1,showRemoveIcon:!1,cellRenderer:function(t,a,n){var r=e.props.classes;return"gst_str"===a.id?i.a.createElement("div",{className:o()(r.gstCell,r.borderCell)},i.a.createElement("span",{className:r.gstLabel},t.includeConsTax?t[a.id]:l._("currency-symbol")+"0"),i.a.createElement("span",{className:r.gstStatus},i.a.createElement("span",null,t.includeConsTax?"Incl ":"Excl ")," ",l._("GST"))):"billingType"===a.id||"amount_str"===a.id?i.a.createElement("div",{className:r.borderCell},t[a.id]):n}}),i.a.createElement(x.a,{container:!0,spacing:0},i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Paid"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),"0.00"))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Sub Total"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),u))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},l._("GST")),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),d))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Total"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),u+d))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.balanceDueWrapper},i.a.createElement("div",{className:a.balanceDueText},"Balance Due"),i.a.createElement("div",{className:a.balanceDueText},l._("currency-symbol"),u+d)))))},t.prototype._renderTimesheetsInvoiceServices=function(){var e=this,t=this.props,a=t.classes,n=t.newInvoice,r=t.createType,l=t.i18n,c=y()(n,(function(e){return e[r]})),s=y()(c,(function(e){return e.tableData}))||[],m=y()(c,(function(e){return e.showTimesheetDetails}))||!1;s=s.filter((function(e){return e.select}));var u=[{id:"service",label:"Service",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}},{id:m?"entry_date":"time_period",label:m?"Entry Date":"Time Period",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}},{id:"status",label:"Status",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.smallWidthCell}},{id:"username",label:"Username",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.mediumWidthCell}},{id:"quantity",label:"Qty.",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.smallWidthCell}},{id:"rate_str",label:"Rate",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.smallWidthCell}},{id:"amount_str",label:"Amount",classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.smallWidthCell}},{id:"gst_str",label:l._("GST"),classes:{cellValueText:a.smallTextCell,tableHeaderCellWrapper:a.gstHeaderCell}}],d=0,p=0;return s.map((function(e){d+=e.amount,e.includeConsTax&&(p+=e.gst)})),i.a.createElement("div",null,i.a.createElement(C.Table,{classes:{component:a.serviceTable},columnData:u,data:s,stripe:!1,sortable:!1,showRemoveIcon:!1,cellRenderer:function(t,a,n){var r=e.props.classes;return"gst_str"===a.id?i.a.createElement("div",{className:o()(r.gstCell,r.borderCell)},i.a.createElement("span",{className:r.gstLabel},t.includeConsTax?t[a.id]:l._("currency-symbol")+"0"),i.a.createElement("span",{className:r.gstStatus},i.a.createElement("span",null,t.includeConsTax?"Incl":"Excl")," ",l._("GST"))):"quantity"===a.id||"rate"===a.id||"amount"===a.id?i.a.createElement("div",{className:r.borderCell},t[a.id]):n}}),i.a.createElement(x.a,{container:!0,spacing:0},i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Paid"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),"0.00"))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Sub Total"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),d))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},l._("GST")),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),p))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.subtotalWrapper},i.a.createElement("div",{className:a.subtotalText},"Total"),i.a.createElement("div",{className:a.subtotalText},l._("currency-symbol"),d+p))),i.a.createElement(x.a,{item:!0,xs:12},i.a.createElement("div",{className:a.balanceDueWrapper},i.a.createElement("div",{className:a.balanceDueText},"Balance Due"),i.a.createElement("div",{className:a.balanceDueText},l._("currency-symbol"),d+p)))))},t.prototype._renderServices=function(){var e=this.props.createType;return i.a.createElement("div",null,"text"===e&&this._renderTextInvoiceServices(),"project"===e&&this._renderProjectInvoiceServices(),"timesheet"===e&&this._renderTimesheetsInvoiceServices())},t.prototype.render=function(){var e=this,t=this.props,a=t.classes,n=t.theme,r=t.createType,l=t.newInvoice,o=t.profile,c=t.makeStepActive,m=t.unmarkedVisited,u=t.company,d=t.i18n,p=this._getTitle(),v=p.title,f=p.subtitle,b=s()(o,"selectedCompany.name"),h=y()(l,(function(e){return e[r]})),g=y()(h,(function(e){return e.payment}))||{},T=y()(h,(function(e){return e.customer}))||{},N=s()(h,"payment.attachments",[]).filter((function(e){return e instanceof File})),I=s()(u,"data.addresses.0",{}),S=s()(o,"selectedCompany.govNumber"),D=s()(u,"data.logo.url","");return i.a.createElement("div",null,i.a.createElement(C.SectionHeader,{title:v,subtitle:f,renderLeftPart:function(){return i.a.createElement("div",{className:a.prevNextWrapper},i.a.createElement(C.Button,{title:"Prev",classes:{component:a.prevNextButton},applyBorderRadius:!0,compactMode:!0,buttonColor:n.palette.primary.color2,withoutBackground:!0,onClick:function(){c(2),m(3)}}),i.a.createElement(C.Button,{id:"finalise-invoice-button",title:"Finalise Invoice",classes:{component:a.sendInvoiceButton},loading:e.state.submitting,applyBorderRadius:!0,compactMode:!0,buttonColor:n.palette.primary.color2,onClick:e._finaliseInvoice}))}}),i.a.createElement("div",{className:a.content,id:"pdf-content"},i.a.createElement("span",{"data-html2canvas-ignore":!0},i.a.createElement(C.SectionHeader,{title:"Review your invoice"})),i.a.createElement("div",{className:a.invoiceHeader},i.a.createElement(x.a,{container:!0},i.a.createElement(x.a,{item:!0,xs:6},this._renderLogo()),i.a.createElement(x.a,{item:!0,xs:6,classes:{item:a.invoiceTitleRightPart}},i.a.createElement("div",{className:a.invoiceNumber},i.a.createElement("div",null,"Invoice #",this.invoiceNumber)),D&&i.a.createElement("div",{className:a.invoiceName},b)))),i.a.createElement("div",{className:a.invoiceDateWrapper},i.a.createElement("div",{className:a.invoiceDateBlock},i.a.createElement("div",{className:a.invoiceDateLabel},"Invoice Date"),i.a.createElement("div",{className:a.invoiceDateValue,"data-test":"invoice-date"},E()(g.invoiceDate).format("DD MMM YYYY"))),i.a.createElement("div",{className:a.invoiceDateBlock,style:{textAlign:"right"}},i.a.createElement("div",{className:a.invoiceDateLabel},"Due Date"),i.a.createElement("div",{className:a.invoiceDateValue,"data-test":"due-date"},E()(g.dueDate).format("DD MMM YYYY")),i.a.createElement("div",{className:a.invoiceDatePeriod,"data-test":"number-of-days"},"("+g.numberOfDays+"days to pay)"))),i.a.createElement("div",{className:a.invoiceCustomer},i.a.createElement(x.a,{container:!0},i.a.createElement(x.a,{item:!0,xs:12,sm:6},i.a.createElement("div",{className:a.invoiceSectionTitle},"Bill to Customer"),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"customer-name"},T.name),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"customer-contact-name"},s()(T,"contactName")," ",s()(T,"contactSurname")),Boolean(T.govNumber)&&i.a.createElement("div",{className:a.invoiceTextValue},d._("ABN")," : ",T.govNumber),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"customer-email"},s()(T,"email"))),i.a.createElement(x.a,{item:!0,xs:12,sm:6,style:{textAlign:"right"}},i.a.createElement("div",{className:a.invoiceSectionTitle},"Company"),I&&i.a.createElement("div",{className:a.invoiceTextValue},I.street,", ",I.city," ",I.state," ",I.country," ",I.postCode),Boolean(S)&&i.a.createElement("div",{className:a.invoiceTextValue},d._("ABN")," : ",S)))),i.a.createElement("div",{className:a.invoiceService},i.a.createElement("div",{className:a.invoiceSectionTitle},"Services"),this._renderServices()),"timesheet"===r&&i.a.createElement("div",{className:a.invoiceMessage},i.a.createElement("div",{className:a.invoiceSectionTitle},"Timesheets"),i.a.createElement("div",{className:a.invoiceTextValue},"This invoice is based on aproved timesheets. Please see other attachment for proof of timesheets.")),Boolean(g.message)&&i.a.createElement("div",{className:a.invoiceMessage},i.a.createElement("div",{className:a.invoiceSectionTitle},"Message"),i.a.createElement("div",{className:a.invoiceTextValue},g.message)),N.length>0&&i.a.createElement("div",{className:a.invoiceAttachments},i.a.createElement("div",{className:a.invoiceSectionTitle},"Attachments"),i.a.createElement("div",{className:a.invoiceAttachedFiles},N.map((function(e,t){return i.a.createElement(C.FileBlock,{key:t,file:e,variant:"none"})})))),i.a.createElement("div",{className:a.payWrapper},i.a.createElement("div",{className:a.payNowSection},i.a.createElement("div",{className:a.payNowText},"Pay now"),i.a.createElement("div",{className:a.invoiceTextValue},"Pay for this invoice now by selecting a payment option.")),i.a.createElement("div",{className:a.secureWrapper},i.a.createElement("div",null,i.a.createElement("div",{className:a.invoiceSectionTitle},"Secure Payments"),i.a.createElement("div",{className:a.secureBtns},i.a.createElement("div",{className:a.invoiceTextValue,style:{marginRight:10}},"Please make payment into the following bank account"))),i.a.createElement("div",null,i.a.createElement("div",{className:a.invoiceSectionTitle},"EFT"),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"bank-name"},s()(u,"data.bankAccount.name")),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"bsb"},d._("BSB")," : ",s()(u,"data.bankAccount.code")),i.a.createElement("div",{className:a.invoiceTextValue,"data-test":"accountNumber"},d._("Account Number")," :"," ",s()(u,"data.bankAccount.accountNumber"))))),i.a.createElement("div",{className:a.invoiceNote,"data-html2canvas-ignore":!0},"If you are happy with this invoice then continue to send the invoice to this customer by selecting the ‘Send Invoice’ button above.",i.a.createElement("br",null),"If you want to make changes then select the step at the top of this page.")),i.a.createElement(A.a,{visible:this.state.showInvoiceModal,onSubmit:this._createInvoice,submitting:this.state.submitting,onClose:function(){e.setState({showInvoiceModal:!1})}}))},t}(r.Component);t.a=Object(h.compose)(Object(v.withI18n)(),Object(C.withStyles)(Object(C.composeStyles)(O.a,O.c)),Object(b.b)((function(e){return{profile:e.profile,newInvoice:y()(e,(function(e){return e.sessionData.newInvoice}))}}),k({},D)),Object(I.withCompany)((function(e){return{id:s()(e,"profile.selectedCompany.id")}})),Object(I.withCreateInvoice)(),Object(I.withCreateCustomer)(),Object(I.withUpdateProject)(),Object(I.withInvoiceNotify)(),Object(I.withUpdateTimeSheet)())(j)}).call(this,a(21))}}]);