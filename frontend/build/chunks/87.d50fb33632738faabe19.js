(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{2353:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(4),s=a.n(i),c=a(3),l=a.n(c),p=a(132),m=a.n(p),d=a(31),u=a.n(d),f=a(63),h=a.n(f),y=a(24),v=a.n(y),x=a(15),E=a(18),b=a(2),g=a(10),w=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),j=function(){return(j=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},k=function(e){function t(t){var a=e.call(this,t)||this;return a.setCompanyAndUserData=function(e){var t=h.a.parse(l()(e,"location.search",""));t["company-token"]&&t["user-token"]&&a.props.actions.setUserData({token:t["user-token"],isLoggedIn:!0,selectedCompany:j(j({},l()(e,"profile.selectedCompany",{})),{id:t["company-token"]})})},a._getTimesheetRows=function(){var e=a.props.timeSheet,t=l()(e,"data.timeSheetEntries")||[],n={};return t.map((function(e){var t=l()(e,"project.id")||l()(e,"customer.id"),a=l()(e,"service.id"),r=e.project,o=e.customer,i=e.service,s=l()(e,"project.id")?"project":"customer",c=t+":"+a;n[c]=n[c]||{},m()(n[c],{id:c,rowType:s,project:{data:r},customer:{data:o},service:{data:i},entries:{data:[].concat(l()(n[c],"entries.data",[]),e)}})})),n},a.setCompanyAndUserData(t),a}return w(t,e),t.prototype.componentDidMount=function(){var e=this.props;this.setCompanyAndUserData(e)},t.prototype._renderPeriodSelection=function(){var e=this.props,t=e.classes,a=e.timeSheet.data||{};return o.a.createElement("div",{className:t.periodSelectionWrapper},o.a.createElement(s.a,{container:!0,justify:"space-between",spacing:0},o.a.createElement(s.a,{item:!0,xs:12,sm:6},o.a.createElement(s.a,{container:!0,spacing:16},o.a.createElement(s.a,{item:!0,xs:12,sm:6},o.a.createElement("div",null,o.a.createElement(b.FieldLabel,{label:"Month"}),o.a.createElement("div",{className:t.textValueBox},v()(a.startsAt).format("MMMM")))),o.a.createElement(s.a,{item:!0,xs:12,sm:6},o.a.createElement("div",null,o.a.createElement(b.FieldLabel,{label:"Year"}),o.a.createElement("div",{className:t.textValueBox},v()(a.startsAt).format("YYYY")))))),o.a.createElement(s.a,{item:!0,xs:12,sm:6},o.a.createElement(s.a,{container:!0,justify:"flex-end"},o.a.createElement(s.a,{item:!0,xs:12,sm:8},o.a.createElement("div",null,o.a.createElement(b.FieldLabel,{label:"Week Period"}),o.a.createElement("div",{className:t.textValueBox},v()(a.startsAt).format("DD MMM")," -"," ",v()(a.endsAt).format("DD MMM"))))))))},t.prototype._renderInputs=function(){var e=this.props,t=e.classes,a=e.timeSheet.data||{},n=this._getTimesheetRows();return u()(n)?null:o.a.createElement("div",{className:t.inputs,id:"timesheet-details"},Object.values(n).map((function(e,t){return o.a.createElement(b.TimesheetRowDisplay,{key:e.id,hideDaysLabel:t>0,startWeekDay:v()(a.startsAt).format(),endWeekDay:v()(a.endsAt).format(),project:e.project,customer:e.customer,service:e.service,timeSheetEntries:e.entries})})))},t.prototype._renderAttachmentField=function(){var e=this.props,t=e.classes,a=e.timeSheet,n=l()(a,"data.attachments",[]);return n.length<=0?null:o.a.createElement("div",{className:t.attachementWrapper},o.a.createElement(b.FieldLabel,{label:"Attachments"}),o.a.createElement("div",{className:t.attachementBlock},o.a.createElement("div",{className:t.attachedFilesBlock},n.map((function(e,t){return o.a.createElement(b.FileBlock,{key:t,file:j(j({},e),{name:e.fileName}),showRemoveButton:!1,variant:"link"})})))))},t.prototype.render=function(){var e=this.props.classes;return o.a.createElement("div",{className:e.page},o.a.createElement("div",{className:e.content},this._renderPeriodSelection(),this._renderInputs(),this._renderAttachmentField()))},t}(r.Component);t.default=Object(E.compose)(Object(b.withStyles)((function(e){return{"@global":{"@page":{margin:"0px 5px",size:"auto"}},page:{flex:1,display:"flex",flexDirection:"column"},content:{padding:"40px 20px",flex:1,display:"flex",flexDirection:"column"},periodSelectionWrapper:{margin:"20px 0px"},inputs:{marginTop:30},textValueBox:{height:52,borderRadius:5,border:"1px solid "+e.palette.grey[300],display:"flex",alignItems:"center",padding:"0px 15px",fontFamily:e.typography.font.family2,fontSize:16,color:e.palette.blueGrey[50]},newRowButton:{marginTop:20},cancelButtonText:{color:e.palette.grey[500]},attachementWrapper:{marginTop:15},attachedFilesBlock:{display:"flex",alignItems:"center",flexWrap:"wrap"},attachementBlock:{border:"2px dashed "+e.palette.primary.color2,borderRadius:5}}})),Object(x.b)((function(e){return{profile:e.profile}})),Object(g.withTimeSheet)((function(e){return{id:l()(e,"match.params.id","")}})))(k)}}]);