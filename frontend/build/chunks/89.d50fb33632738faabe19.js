(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{2321:function(e,t,r){"use strict";r.r(t);var a,n=r(0),s=r.n(n),o=r(7),i=r.n(o),l=r(31),c=r.n(l),p=r(3),m=r.n(p),u=r(252),d=r.n(u),h=r(2),f=r(5),y=r(471),v=r(472),E=r(173),w=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),T=function(){return(T=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={allHide:!1},t}return w(t,e),t.prototype._renderSectionHeading=function(){var e=this.props,t=e.history,r=e.theme;return s.a.createElement(h.SectionHeader,{title:"Timesheets",subtitle:"Below is a list of all your draft timesheets.",renderLeftPart:function(){return s.a.createElement(h.Button,{title:"Create new timesheet",applyBorderRadius:!0,width:260,buttonColor:r.palette.primary.color2,onClick:function(){t.push(f.a.CREATE_TIMESHEETS())}})}})},t.prototype._renderFilterUserDropdown=function(){var e=this.props,t=e.onlyMyTimesheet,r=e.users,a=e.addFilteredUser,n=e.removeFilteredUser,o=e.classes;return t?null:s.a.createElement("div",{className:o.dropdownWrapper},s.a.createElement(h.Dropdown,{label:"Filter Users",items:r.map((function(e){return{label:e.firstName+" "+e.lastName,value:e}})),multiple:!0,onChange:function(e,t,r){r?a(e.value):n(e.value)}}))},t.prototype._renderNoTimesheets=function(){var e=this.props.classes;return s.a.createElement("div",{className:e.noTimesheetsWrapper},s.a.createElement("div",{className:e.noTimesheetsMessageWrapper},s.a.createElement("div",{className:e.noTimesheetsMessage},"There are no draft Timesheets. ",s.a.createElement("br",null),"Letâ€™s start by creating a new Timesheet.")))},t.prototype._renderTimesheets=function(){var e=this,t=this.props,r=t.classes,a=t.history,n=t.timeSheetData,o=t.loadMore,l=this.state.allHide;return s.a.createElement(h.ScrollObserver,{onBottomReached:function(){return o()},onBottomReachedThreshold:500},s.a.createElement("div",{className:r.timesheetsContainer},s.a.createElement("div",{className:r.expandHideWrapper},s.a.createElement("span",{className:i()(r.expandHideLabel,{active:l}),onClick:function(){e.setState({allHide:!1})}},"Expand"),s.a.createElement("span",{className:r.slash},"/"),s.a.createElement("span",{className:i()(r.expandHideLabel,{active:!l}),onClick:function(){e.setState({allHide:!0})}},"Hide")),Object.keys(n).map((function(t){var o=n[t],i=m()(o,"project")||{},p=m()(o,"service")||{},u=m()(o,"customer")||{},h="hour";return"DAY"===p.timeBasedType&&(h="day"),s.a.createElement("div",{className:r.timesheet,key:o.id},s.a.createElement(y.a,{type:c()(o.project)?"company":"project",collapsed:l,serviceName:p.name,companyName:u.name,project:i.name,showEmailIcon:!1,showRemoveIcon:!0,showViewIcon:!1,rows:Object.keys(o.rows).map((function(e){var t=o.rows[e],r=m()(t,"user",{}),a=r.firstName,n=r.lastName;return{id:t.id,user:a+" "+n,period:t.startsAt+" - "+t.endsAt,status:t.status,hours:t.hours+" "+d()(h,t.hours),totalHours:t.hours,startsAt:t.startsAtFormatted}})),onCellClick:function(e,t){var r=t.row;t.column;a.push(f.a.EDIT_TIMESHEETS({id:r.id}))},onRemoveClicked:e.props.showArchiveDialog}))}))))},t.prototype.render=function(){var e=this.props,t=e.classes,r=e.timeSheetData,a=e.timeSheetsLoading;return s.a.createElement(h.ErrorBoundary,null,s.a.createElement("div",{className:t.page},this._renderSectionHeading(),this._renderFilterUserDropdown(),a&&s.a.createElement(h.Loading,null),!a&&c()(r)&&this._renderNoTimesheets(),!c()(r)&&this._renderTimesheets()))},t}(n.Component),_=Object(h.withStyles)(E.a)(N);t.default=function(e){return s.a.createElement(v.a,T({},e,{timesheet_type:"draft"}),(function(e){return s.a.createElement(_,T({},e))}))}}}]);